import{d as ai,c as Ee,o as ie,a as E,az as Si,Q as et,a6 as tt,r as he,b as Je,t as Ui,X as Ri,I as We,J as G,al as Ie,v as si,R as W,L as qe,O as be,K as Di,S as Li,P as bt}from"./vue-DxnRWF16.js";import{g as zi,E as $e}from"./element-plus-CHD75wnH.js";import{r as Vi}from"./highcharts-DSb220Oi.js";import{_ as li}from"./index-BE0p4P70.js";var Bi=Vi();const Ii=zi(Bi);var yt={exports:{}},Ni=yt.exports,oi;function Oi(){return oi||(oi=1,(function(At,Ne){(function(se,B){At.exports=B(se._Highcharts,se._Highcharts.Color)})(typeof window>"u"?Ni:window,(se,B)=>(()=>{let le,m;var _e,Pe={620:t=>{t.exports=B},944:t=>{t.exports=se}},N={};function oe(t){var e=N[t];if(e!==void 0)return e.exports;var i=N[t]={exports:{}};return Pe[t](i,i.exports,oe),i.exports}oe.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return oe.d(e,{a:e}),e},oe.d=(t,e)=>{for(var i in e)oe.o(e,i)&&!oe.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},oe.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var O={};oe.d(O,{default:()=>Ei});var Ce=oe(944),z=oe.n(Ce);let w=["area","areaspline","arearange","column","columnrange","bar","line","scatter","heatmap","bubble","treemap"],P={};w.forEach(t=>{P[t]=!0});let{composed:Y}=z(),{addEvent:Oe,pick:Xe,pushUnique:_t}=z();function it(t){let e=t.series,i=t.boost=t.boost||{},s=t.options.boost||{},o=Xe(s.seriesThreshold,50);if(e.length>=o)return!0;if(e.length===1)return!1;let h=s.allowForce;if(h===void 0){for(let r of(h=!0,t.xAxis))if(Xe(r.min,-1/0)>Xe(r.dataMin,-1/0)||Xe(r.max,1/0)<Xe(r.dataMax,1/0)){h=!1;break}}if(i.forceChartBoost!==void 0){if(h)return i.forceChartBoost;i.forceChartBoost=void 0}let d=0,u=0,c;for(let r of e)(c=r.options).boostThreshold!==0&&r.visible!==!1&&r.type!=="heatmap"&&(P[r.type]&&++d,(function(...C){let g=-Number.MAX_VALUE;return C.forEach(L=>{if(L!=null&&L.length!==void 0&&L.length>0)return g=L.length,!0}),g})(r.getColumn("x",!0),c.data,r.points)>=(c.boostThreshold||Number.MAX_VALUE)&&++u);return i.forceChartBoost=h&&(d===e.length&&u===d||u>5),i.forceChartBoost}function ct(t){function e(){t.boost&&t.boost.wgl&&it(t)&&t.boost.wgl.render(t)}Oe(t,"predraw",function(){t.boost=t.boost||{},t.boost.forceChartBoost=void 0,t.boosted=!1,t.axes.some(o=>o.isPanning)||t.boost.clear?.(),t.boost.canvas&&t.boost.wgl&&it(t)&&t.boost.wgl.allocateBuffer(t),t.boost.markerGroup&&t.xAxis&&t.xAxis.length>0&&t.yAxis&&t.yAxis.length>0&&t.boost.markerGroup.translate(t.xAxis[0].pos,t.yAxis[0].pos)}),Oe(t,"load",e,{order:-1}),Oe(t,"redraw",e);let i=-1,s=-1;Oe(t.pointer,"afterGetHoverData",o=>{let h=o.hoverPoint?.series;if(t.boost=t.boost||{},t.boost.markerGroup&&h){let d=t.inverted?h.yAxis:h.xAxis,u=t.inverted?h.xAxis:h.yAxis;(d&&d.pos!==i||u&&u.pos!==s)&&(t.series.forEach(c=>{c.halo?.hide()}),t.boost.markerGroup.translate(d.pos,u.pos),i=d.pos,s=u.pos)}})}let st={compose:function(t,e){return e&&_t(Y,"Boost.Chart")&&t.prototype.callbacks.push(ct),t},getBoostClipRect:function(t,e){let i=t.navigator,s={x:t.plotLeft,y:t.plotTop,width:t.plotWidth,height:t.plotHeight};if(i&&t.inverted?(s.width+=i.top+i.height,i.opposite||(s.x=i.left)):i&&!t.inverted&&(s.height=i.top+i.height-t.plotTop),e.is){let{xAxis:o,yAxis:h}=e;if(s=t.getClipBox(e),t.inverted){let d=s.width;s.width=s.height,s.height=d,s.x=h.pos,s.y=o.pos}else s.x=o.pos,s.y=h.pos}if(e===t){let o=t.inverted?t.xAxis:t.yAxis;o.length<=1&&(s.y=Math.min(o[0].pos,s.y),s.height=o[0].pos-t.plotTop+o[0].len)}return s},isChartSeriesBoosting:it};var Pt=oe(620),De=oe.n(Pt);let Ct={area:"LINES",arearange:"LINES",areaspline:"LINES",column:"LINES",columnrange:"LINES",bar:"LINES",line:"LINE_STRIP",scatter:"POINTS",heatmap:"TRIANGLES",treemap:"TRIANGLES",bubble:"POINTS"},{clamp:Mt,error:kt,pick:ot}=z(),Tt=class{constructor(t){this.errors=[],this.uLocations={},this.gl=t,t&&this.createShader()}bind(){this.gl&&this.shaderProgram&&this.gl.useProgram(this.shaderProgram)}createShader(){let t=this.stringToProgram(`#version 100
#define LN10 2.302585092994046
precision highp float;
attribute vec4 aVertexPosition;
attribute vec4 aColor;
varying highp vec2 position;
varying highp vec4 vColor;
uniform mat4 uPMatrix;
uniform float pSize;
uniform float translatedThreshold;
uniform bool hasThreshold;
uniform bool skipTranslation;
uniform float xAxisTrans;
uniform float xAxisMin;
uniform float xAxisMax;
uniform float xAxisMinPad;
uniform float xAxisPointRange;
uniform float xAxisLen;
uniform bool  xAxisPostTranslate;
uniform float xAxisOrdinalSlope;
uniform float xAxisOrdinalOffset;
uniform float xAxisPos;
uniform bool  xAxisCVSCoord;
uniform bool  xAxisIsLog;
uniform bool  xAxisReversed;
uniform float yAxisTrans;
uniform float yAxisMin;
uniform float yAxisMax;
uniform float yAxisMinPad;
uniform float yAxisPointRange;
uniform float yAxisLen;
uniform bool  yAxisPostTranslate;
uniform float yAxisOrdinalSlope;
uniform float yAxisOrdinalOffset;
uniform float yAxisPos;
uniform bool  yAxisCVSCoord;
uniform bool  yAxisIsLog;
uniform bool  yAxisReversed;
uniform bool  isCircle;
uniform bool  isBubble;
uniform bool  bubbleSizeByArea;
uniform float bubbleZMin;
uniform float bubbleZMax;
uniform float bubbleZThreshold;
uniform float bubbleMinSize;
uniform float bubbleMaxSize;
uniform bool  bubbleSizeAbs;
uniform bool  isInverted;
float bubbleRadius(){
float value = aVertexPosition.w;
float zMax = bubbleZMax;
float zMin = bubbleZMin;
float radius = 0.0;
float pos = 0.0;
float zRange = zMax - zMin;
if (bubbleSizeAbs){
value = value - bubbleZThreshold;
zMax = max(zMax - bubbleZThreshold, zMin - bubbleZThreshold);
zMin = 0.0;
}
if (value < zMin){
radius = bubbleZMin / 2.0 - 1.0;
} else {
pos = zRange > 0.0 ? (value - zMin) / zRange : 0.5;
if (bubbleSizeByArea && pos > 0.0){
pos = sqrt(pos);
}
radius = ceil(bubbleMinSize + pos * (bubbleMaxSize - bubbleMinSize)) / 2.0;
}
return radius * 2.0;
}
float translate(float val,
float pointPlacement,
float localA,
float localMin,
float minPixelPadding,
float pointRange,
float len,
bool  cvsCoord,
bool  isLog,
bool  reversed
){
float sign = 1.0;
float cvsOffset = 0.0;
if (cvsCoord) {
sign *= -1.0;
cvsOffset = len;
}
if (isLog) {
val = log(val) / LN10;
}
if (reversed) {
sign *= -1.0;
cvsOffset -= sign * len;
}
return sign * (val - localMin) * localA + cvsOffset + 
(sign * minPixelPadding);
}
float xToPixels(float value) {
if (skipTranslation){
return value;// + xAxisPos;
}
return translate(value, 0.0, xAxisTrans, xAxisMin, xAxisMinPad, xAxisPointRange, xAxisLen, xAxisCVSCoord, xAxisIsLog, xAxisReversed);// + xAxisPos;
}
float yToPixels(float value, float checkTreshold) {
float v;
if (skipTranslation){
v = value;// + yAxisPos;
} else {
v = translate(value, 0.0, yAxisTrans, yAxisMin, yAxisMinPad, yAxisPointRange, yAxisLen, yAxisCVSCoord, yAxisIsLog, yAxisReversed);// + yAxisPos;
if (v > yAxisLen) {
v = yAxisLen;
}
}
if (checkTreshold > 0.0 && hasThreshold) {
v = min(v, translatedThreshold);
}
return v;
}
void main(void) {
if (isBubble){
gl_PointSize = bubbleRadius();
} else {
gl_PointSize = pSize;
}
vColor = aColor;
if (!skipTranslation && isCircle && (
aVertexPosition.x < xAxisMin ||
aVertexPosition.x > xAxisMax ||
aVertexPosition.y < yAxisMin ||
aVertexPosition.y > yAxisMax
)) {
gl_Position = uPMatrix * vec4(2.0, 2.0, 2.0, 1.0);
} else if (skipTranslation && isInverted) {
gl_Position = uPMatrix * vec4(aVertexPosition.y + yAxisPos, aVertexPosition.x + xAxisPos, 0.0, 1.0);
} else if (isInverted) {
gl_Position = uPMatrix * vec4(yToPixels(aVertexPosition.y, aVertexPosition.z) + yAxisPos, xToPixels(aVertexPosition.x) + xAxisPos, 0.0, 1.0);
} else {
gl_Position = uPMatrix * vec4(xToPixels(aVertexPosition.x) + xAxisPos, yToPixels(aVertexPosition.y, aVertexPosition.z) + yAxisPos, 0.0, 1.0);
}
}`,"vertex"),e=this.stringToProgram(`precision highp float;
uniform vec4 fillColor;
varying highp vec2 position;
varying highp vec4 vColor;
uniform sampler2D uSampler;
uniform bool isCircle;
uniform bool hasColor;
void main(void) {
vec4 col = fillColor;
vec4 tcol = texture2D(uSampler, gl_PointCoord.st);
if (hasColor) {
col = vColor;
}
if (isCircle) {
col *= tcol;
if (tcol.r < 0.0) {
discard;
} else {
gl_FragColor = col;
}
} else {
gl_FragColor = col;
}
}`,"fragment"),i=s=>this.gl.getUniformLocation(this.shaderProgram,s);return t&&e?(this.shaderProgram=this.gl.createProgram(),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.gl.getProgramParameter(this.shaderProgram,this.gl.LINK_STATUS)?(this.gl.useProgram(this.shaderProgram),this.gl.bindAttribLocation(this.shaderProgram,0,"aVertexPosition"),this.pUniform=i("uPMatrix"),this.psUniform=i("pSize"),this.fcUniform=i("fillColor"),this.isBubbleUniform=i("isBubble"),this.bubbleSizeAbsUniform=i("bubbleSizeAbs"),this.bubbleSizeAreaUniform=i("bubbleSizeByArea"),this.uSamplerUniform=i("uSampler"),this.skipTranslationUniform=i("skipTranslation"),this.isCircleUniform=i("isCircle"),this.isInverted=i("isInverted"),!0):(this.errors.push(this.gl.getProgramInfoLog(this.shaderProgram)),this.handleErrors(),this.shaderProgram=!1,!1)):(this.shaderProgram=!1,this.handleErrors(),!1)}handleErrors(){this.errors.length&&kt("[highcharts boost] shader error - "+this.errors.join(`
`))}stringToProgram(t,e){let i=this.gl.createShader(e==="vertex"?this.gl.VERTEX_SHADER:this.gl.FRAGMENT_SHADER);return this.gl.shaderSource(i,t),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(this.errors.push("when compiling "+e+` shader:
`+this.gl.getShaderInfoLog(i)),!1)}destroy(){this.gl&&this.shaderProgram&&(this.gl.deleteProgram(this.shaderProgram),this.shaderProgram=!1)}fillColorUniform(){return this.fcUniform}getProgram(){return this.shaderProgram}pointSizeUniform(){return this.psUniform}perspectiveUniform(){return this.pUniform}reset(){this.gl&&this.shaderProgram&&(this.gl.uniform1i(this.isBubbleUniform,0),this.gl.uniform1i(this.isCircleUniform,0))}setBubbleUniforms(t,e,i,s=1){let o=t.options,h=Number.MAX_VALUE,d=-Number.MAX_VALUE;if(this.gl&&this.shaderProgram&&t.is("bubble")){let u=t.getPxExtremes();h=ot(o.zMin,Mt(e,o.displayNegative===!1?o.zThreshold:-Number.MAX_VALUE,h)),d=ot(o.zMax,Math.max(d,i)),this.gl.uniform1i(this.isBubbleUniform,1),this.gl.uniform1i(this.isCircleUniform,1),this.gl.uniform1i(this.bubbleSizeAreaUniform,t.options.sizeBy!=="width"),this.gl.uniform1i(this.bubbleSizeAbsUniform,t.options.sizeByAbsoluteValue),this.setUniform("bubbleMinSize",u.minPxSize*s),this.setUniform("bubbleMaxSize",u.maxPxSize*s),this.setUniform("bubbleZMin",h),this.setUniform("bubbleZMax",d),this.setUniform("bubbleZThreshold",t.options.zThreshold)}}setColor(t){this.gl&&this.shaderProgram&&this.gl.uniform4f(this.fcUniform,t[0]/255,t[1]/255,t[2]/255,t[3])}setDrawAsCircle(t){this.gl&&this.shaderProgram&&this.gl.uniform1i(this.isCircleUniform,+!!t)}setInverted(t){this.gl&&this.shaderProgram&&this.gl.uniform1i(this.isInverted,t)}setPMatrix(t){this.gl&&this.shaderProgram&&this.gl.uniformMatrix4fv(this.pUniform,!1,t)}setPointSize(t){this.gl&&this.shaderProgram&&this.gl.uniform1f(this.psUniform,t)}setSkipTranslation(t){this.gl&&this.shaderProgram&&this.gl.uniform1i(this.skipTranslationUniform,+(t===!0))}setTexture(t){this.gl&&this.shaderProgram&&this.gl.uniform1i(this.uSamplerUniform,t)}setUniform(t,e){if(this.gl&&this.shaderProgram){let i=this.uLocations[t]=this.uLocations[t]||this.gl.getUniformLocation(this.shaderProgram,t);this.gl.uniform1f(i,e)}}},rt=class{constructor(t,e,i){this.buffer=!1,this.iterator=0,this.preAllocated=!1,this.vertAttribute=!1,this.components=i||2,this.dataComponents=i,this.gl=t,this.shader=e}allocate(t){this.iterator=-1,this.preAllocated=new Float32Array(4*t)}bind(){if(!this.buffer)return!1;this.gl.vertexAttribPointer(this.vertAttribute,this.components,this.gl.FLOAT,!1,0,0)}build(t,e,i){let s;return this.data=t||[],this.data&&this.data.length!==0||this.preAllocated?(this.components=i||this.components,this.buffer&&this.gl.deleteBuffer(this.buffer),this.preAllocated||(s=new Float32Array(this.data)),this.buffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.preAllocated||s,this.gl.STATIC_DRAW),this.vertAttribute=this.gl.getAttribLocation(this.shader.getProgram(),e),this.gl.enableVertexAttribArray(this.vertAttribute),s=!1,!0):(this.destroy(),!1)}destroy(){this.buffer&&(this.gl.deleteBuffer(this.buffer),this.buffer=!1,this.vertAttribute=!1),this.iterator=0,this.components=this.dataComponents||2,this.data=[]}push(t,e,i,s){this.preAllocated&&(this.preAllocated[++this.iterator]=t,this.preAllocated[++this.iterator]=e,this.preAllocated[++this.iterator]=i,this.preAllocated[++this.iterator]=s)}render(t,e,i){let s=this.preAllocated?this.preAllocated.length:this.data.length;return!!this.buffer&&!!s&&((!t||t>s||t<0)&&(t=0),(!e||e>s)&&(e=s),!(t>=e)&&(i=i||"POINTS",this.gl.drawArrays(this.gl[i],t/this.components,(e-t)/this.components),!0))}},{getBoostClipRect:q}=st,{parse:ye}=De(),{doc:b,win:l}=z(),{isNumber:y,isObject:_,merge:k,objectEach:v,pick:H}=z(),x={column:!0,columnrange:!0,bar:!0,area:!0,areaspline:!0,arearange:!0},n={scatter:!0,bubble:!0},p=["webgl","experimental-webgl","moz-webgl","webkit-3d"];class a{static orthoMatrix(e,i){return[2/e,0,0,0,0,-(2/i),0,0,0,0,-2,0,-1,1,-1,1]}static seriesPointCount(e){let i,s,o;return e.boosted?(i=!!e.options.stacking,s=(e.getColumn("x").length?e.getColumn("x"):void 0)||e.options.xData||e.getColumn("x",!0),o=(i?e.data:s||e.options.data).length,e.type==="treemap"?o*=12:e.type==="heatmap"?o*=6:x[e.type]&&(o*=2),o):0}constructor(e){this.data=[],this.height=0,this.isInited=!1,this.markerData=[],this.series=[],this.textureHandles={},this.width=0,this.postRenderCallback=e,this.settings={pointSize:1,lineWidth:1,fillColor:"#AA00AA",useAlpha:!0,usePreallocated:!1,useGPUTranslations:!1,debug:{timeRendering:!1,timeSeriesProcessing:!1,timeSetup:!1,timeBufferCopy:!1,timeKDTree:!1,showSkipSummary:!1}}}getPixelRatio(){return this.settings.pixelRatio||l.devicePixelRatio||1}setOptions(e){"pixelRatio"in e||(e.pixelRatio=1),k(!0,this.settings,e)}allocateBuffer(e){let i=this.vbuffer,s=0;this.settings.usePreallocated&&(e.series.forEach(o=>{o.boosted&&(s+=a.seriesPointCount(o))}),i&&i.allocate(s))}allocateBufferForSingleSeries(e){let i=this.vbuffer,s=0;this.settings.usePreallocated&&(e.boosted&&(s=a.seriesPointCount(e)),i&&i.allocate(s))}clear(){let e=this.gl;e&&e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}pushSeriesData(e,i){let s=this.data,o=this.settings,h=this.vbuffer,d=e.pointArrayMap&&e.pointArrayMap.join(",")==="low,high",{chart:u,options:c,sorted:r,xAxis:C,yAxis:g}=e,L=!!c.stacking,I=c.data,$=e.xAxis.getExtremes(),K=$.min-(e.xAxis.minPointOffset||0),Z=$.max+(e.xAxis.minPointOffset||0),de=e.yAxis.getExtremes(),fe=de.min-(e.yAxis.minPointOffset||0),Q=de.max+(e.yAxis.minPointOffset||0),me=(e.getColumn("x").length?e.getColumn("x"):void 0)||c.xData||e.getColumn("x",!0),j=(e.getColumn("y").length?e.getColumn("y"):void 0)||c.yData||e.getColumn("y",!0),J=(e.getColumn("z").length?e.getColumn("z"):void 0)||c.zData||e.getColumn("z",!0),ce=!me||me.length===0,ge=e.options.colorByPoint,pe=c.connectNulls,re=e.points||!1,F=L?e.data:me||I,Me={x:Number.MAX_VALUE,y:0},Fe={x:-Number.MAX_VALUE,y:0},dt=u.index===void 0,He=x[e.type],ft=c.zoneAxis||"y",Se=c.zones||!1,Ze=c.threshold,Ue=this.getPixelRatio(),Re=e.chart.plotWidth,ke=!1,je=!1,Te,ze,V=0,ne=!1,S,U,R,ue,D=-1,xe=!1,ve=!1,Ve,St=!1,Ut=!1,te,Rt=!1,Dt=!0,ei=!0,Qe,Be=!1,Lt=!1,gt=0,zt=0;if(c.boostData&&c.boostData.length>0)return;c.gapSize&&(Lt=c.gapUnit!=="value"?c.gapSize*e.closestPointRange:c.gapSize),Se&&(Qe=[],Se.forEach((A,T)=>{if(A.color){let X=ye(A.color).rgba;X[0]/=255,X[1]/=255,X[2]/=255,Qe[T]=X,Be||A.value!==void 0||(Be=X)}}),Be||(Be=ye(e.pointAttribs&&e.pointAttribs().fill||e.color).rgba,Be[0]/=255,Be[1]/=255,Be[2]/=255)),u.inverted&&(Re=e.chart.plotHeight),e.closestPointRangePx=Number.MAX_VALUE;let Ye=A=>{A&&(i.colorData.push(A[0]),i.colorData.push(A[1]),i.colorData.push(A[2]),i.colorData.push(A[3]))},we=(A,T,X,ae=1,ee)=>{Ye(ee),Ue!==1&&(!o.useGPUTranslations||i.skipTranslation)&&(A*=Ue,T*=Ue,ae*=Ue),o.usePreallocated&&h?(h.push(A,T,+!!X,ae),gt+=4):(s.push(A),s.push(T),s.push(X?Ue:0),s.push(ae))},Vt=()=>{i.segments.length&&(i.segments[i.segments.length-1].to=s.length||gt)},mt=()=>{i.segments.length&&i.segments[i.segments.length-1].from===(s.length||gt)||(Vt(),i.segments.push({from:s.length||gt}))},ti=(A,T,X,ae,ee)=>{Ye(ee),we(A+X,T),Ye(ee),we(A,T),Ye(ee),we(A,T+ae),Ye(ee),we(A,T+ae),Ye(ee),we(A+X,T+ae),Ye(ee),we(A+X,T)};if(mt(),re&&re.length>0){i.skipTranslation=!0,i.drawMode="TRIANGLES",re[0].node&&re[0].node.levelDynamic&&re.sort((A,T)=>{if(A.node){if(A.node.levelDynamic>T.node.levelDynamic)return 1;if(A.node.levelDynamic<T.node.levelDynamic)return-1}return 0}),re.forEach(A=>{let T,X,ae=A.plotY;if(ae!==void 0&&!isNaN(ae)&&A.y!==null&&A.shapeArgs){let{x:ee=0,y:pt=0,width:xt=0,height:vt=0}=A.shapeArgs;T=(X=u.styledMode?A.series.colorAttribs(A):X=A.series.pointAttribs(A))["stroke-width"]||0,te=ye(X.fill).rgba,te[0]/=255,te[1]/=255,te[2]/=255,e.is("treemap")&&(T=T||1,ze=ye(X.stroke).rgba,ze[0]/=255,ze[1]/=255,ze[2]/=255,ti(ee,pt,xt,vt,ze),T/=2),e.is("heatmap")&&u.inverted&&(ee=C.len-ee,pt=g.len-pt,xt=-xt,vt=-vt),ti(ee+T,pt+T,xt-2*T,vt-2*T,te)}}),Vt();return}for(;D<F.length-1;){if((R=F[++D])===void 0)continue;if(dt)break;let A=I&&I[D];if(!ce){_(A,!0)&&A.color&&(te=ye(A.color).rgba);let T=e.options.keys?.indexOf("color");Array.isArray(A)&&T&&typeof A[T]=="string"?te=ye(A[T]).rgba:ge&&u.options.colors&&(zt%=u.options.colors.length,te=ye(u.options.colors[zt]).rgba),te&&(te[0]/=255,te[1]/=255,te[2]/=255),zt++}if(ce?(S=R[0],U=R[1],F[D+1]&&(ve=F[D+1][0]),F[D-1]&&(xe=F[D-1][0]),R.length>=3&&(ue=R[2],R[2]>i.zMax&&(i.zMax=R[2]),R[2]<i.zMin&&(i.zMin=R[2]))):(S=R,U=j?.[D],F[D+1]&&(ve=F[D+1]),F[D-1]&&(xe=F[D-1]),J&&J.length&&(ue=J[D],J[D]>i.zMax&&(i.zMax=J[D]),J[D]<i.zMin&&(i.zMin=J[D]))),!pe&&(S===null||U===null)){mt();continue}if(ve&&ve>=K&&ve<=Z&&(St=!0),xe&&xe>=K&&xe<=Z&&(Ut=!0),d?(ce&&(U=R.slice(1,3)),Ve=e.getColumn("low",!0)?.[D],U=e.getColumn("high",!0)?.[D]||0):L&&(S=R.x,Ve=(U=R.stackY)-R.y),fe!=null&&Q!=null&&(Dt=U>=fe&&U<=Q),!(!r&&!Dt||(S>Z&&Fe.x<Z&&(Fe.x=S,Fe.y=U),S<K&&Me.x>K&&(Me.x=S,Me.y=U),U===null&&pe))){if(U===null||!Dt&&F.length>1&&!St&&!Ut){mt();continue}if((r&&(ve>=K||S>=K)&&(xe<=Z||S<=Z)||!r&&S>=K&&S<=Z)&&(Rt=!0),Rt||St||Ut){if(Lt&&S-xe>Lt&&mt(),Se){let T;Se.some((X,ae)=>{let ee=Se[ae-1];return ft==="x"?X.value!==void 0&&S<=X.value&&(Qe[ae]&&(!ee||S>=ee.value)&&(T=Qe[ae]),!0):X.value!==void 0&&U<=X.value&&(Qe[ae]&&(!ee||U>=ee.value)&&(T=Qe[ae]),!0)}),te=T||Be||te}if(o.useGPUTranslations||(i.skipTranslation=!0,S=C.toPixels(S,!0),U=g.toPixels(U,!0),!(S>Re)||i.drawMode!=="POINTS")){if(i.hasMarkers&&Rt&&ke!==!1&&(e.closestPointRangePx=Math.min(e.closestPointRangePx,Math.abs(S-ke))),!o.useGPUTranslations&&!o.usePreallocated&&ke&&1>Math.abs(S-ke)&&je&&1>Math.abs(U-je)){o.debug.showSkipSummary&&++V;continue}He&&(Te=Ve||0,(Ve===!1||Ve===void 0)&&(Te=U<0?U:0),(d||L)&&!g.logarithmic||(Te=Math.max(Ze===null?fe:Ze,fe)),o.useGPUTranslations||(Te=g.toPixels(Te,!0)),we(S,Te,!1,0,te)),c.step&&!ei&&we(S,je,!1,2,te),we(S,U,!1,e.type==="bubble"?ue||1:2,te),ke=S,je=U,ne=!0,ei=!1}}}}o.debug.showSkipSummary&&console.log("skipped points:",V);let ii=(A,T)=>{if(o.useGPUTranslations||(i.skipTranslation=!0,A.x=C.toPixels(A.x,!0),A.y=g.toPixels(A.y,!0)),T){this.data=[A.x,A.y,0,2].concat(this.data);return}we(A.x,A.y,0,2)};!ne&&pe!==!1&&e.drawMode==="line_strip"&&(Me.x<Number.MAX_VALUE&&ii(Me,!0),Fe.x>-Number.MAX_VALUE&&ii(Fe)),Vt()}pushSeries(e){let i=this.markerData,s=this.series,o=this.settings;s.length>0&&s[s.length-1].hasMarkers&&(s[s.length-1].markerTo=i.length),o.debug.timeSeriesProcessing&&console.time("building "+e.type+" series");let h={segments:[],markerFrom:i.length,colorData:[],series:e,zMin:Number.MAX_VALUE,zMax:-Number.MAX_VALUE,hasMarkers:!!e.options.marker&&e.options.marker.enabled!==!1,showMarkers:!0,drawMode:Ct[e.type]||"LINE_STRIP"};e.index>=s.length?s.push(h):s[e.index]=h,this.pushSeriesData(e,h),o.debug.timeSeriesProcessing&&console.timeEnd("building "+e.type+" series")}flush(){let e=this.vbuffer;this.data=[],this.markerData=[],this.series=[],e&&e.destroy()}setXAxis(e){let i=this.shader;if(!i)return;let s=this.getPixelRatio();i.setUniform("xAxisTrans",e.transA*s),i.setUniform("xAxisMin",e.min),i.setUniform("xAxisMax",e.max),i.setUniform("xAxisMinPad",e.minPixelPadding*s),i.setUniform("xAxisPointRange",e.pointRange),i.setUniform("xAxisLen",e.len*s),i.setUniform("xAxisPos",e.pos*s),i.setUniform("xAxisCVSCoord",!e.horiz),i.setUniform("xAxisIsLog",!!e.logarithmic),i.setUniform("xAxisReversed",!!e.reversed)}setYAxis(e){let i=this.shader;if(!i)return;let s=this.getPixelRatio();i.setUniform("yAxisTrans",e.transA*s),i.setUniform("yAxisMin",e.min),i.setUniform("yAxisMax",e.max),i.setUniform("yAxisMinPad",e.minPixelPadding*s),i.setUniform("yAxisPointRange",e.pointRange),i.setUniform("yAxisLen",e.len*s),i.setUniform("yAxisPos",e.pos*s),i.setUniform("yAxisCVSCoord",!e.horiz),i.setUniform("yAxisIsLog",!!e.logarithmic),i.setUniform("yAxisReversed",!!e.reversed)}setThreshold(e,i){let s=this.shader;s&&(s.setUniform("hasThreshold",e),s.setUniform("translatedThreshold",i))}renderChart(e){let i=this.gl,s=this.settings,o=this.shader,h=this.vbuffer,d=this.getPixelRatio();if(!e)return!1;this.width=e.chartWidth*d,this.height=e.chartHeight*d;let u=this.height,c=this.width;if(!i||!o||!c||!u)return!1;s.debug.timeRendering&&console.time("gl rendering"),i.canvas.width=c,i.canvas.height=u,o.bind(),i.viewport(0,0,c,u),o.setPMatrix(a.orthoMatrix(c,u)),s.lineWidth>1&&!z().isMS&&i.lineWidth(s.lineWidth),h&&(h.build(this.data,"aVertexPosition",4),h.bind()),o.setInverted(e.inverted),this.series.forEach((r,C)=>{let g=r.series.options,L=g.marker,I=g.lineWidth!==void 0?g.lineWidth:1,$=g.threshold,K=y($),Z=r.series.yAxis.getThreshold($),de=H(g.marker?g.marker.enabled:null,!!r.series.xAxis.isRadial||null,r.series.closestPointRangePx>2*((g.marker?g.marker.radius:10)||10)),fe=this.textureHandles[L&&L.symbol||r.series.symbol]||this.textureHandles.circle,Q,me,j,J=[];if(r.segments.length!==0&&r.segments[0].from!==r.segments[0].to&&(fe.isReady&&(i.bindTexture(i.TEXTURE_2D,fe.handle),o.setTexture(fe.handle)),e.styledMode?r.series.markerGroup===r.series.chart.boost?.markerGroup?(delete r.series.markerGroup,r.series.markerGroup=r.series.plotGroup("markerGroup","markers","visible",1,e.seriesGroup).addClass("highcharts-tracker"),j=r.series.markerGroup.getStyle("fill"),r.series.markerGroup.destroy(),r.series.markerGroup=r.series.chart.boost?.markerGroup):j=r.series.markerGroup?.getStyle("fill"):(j=r.drawMode==="POINTS"&&r.series.pointAttribs&&r.series.pointAttribs().fill||r.series.color,g.colorByPoint&&(j=r.series.chart.options.colors[C])),r.series.fillOpacity&&g.fillOpacity&&(j=new(De())(j).setOpacity(H(g.fillOpacity,1)).get()),J=ye(j).rgba,s.useAlpha||(J[3]=1),g.boostBlending==="add"?(i.blendFunc(i.SRC_ALPHA,i.ONE),i.blendEquation(i.FUNC_ADD)):g.boostBlending==="mult"||g.boostBlending==="multiply"?i.blendFunc(i.DST_COLOR,i.ZERO):g.boostBlending==="darken"?(i.blendFunc(i.ONE,i.ONE),i.blendEquation(i.FUNC_MIN)):i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA),o.reset(),r.colorData.length>0?(o.setUniform("hasColor",1),(me=new rt(i,o)).build(Array(r.segments[0].from).concat(r.colorData),"aColor",4),me.bind()):(o.setUniform("hasColor",0),i.disableVertexAttribArray(i.getAttribLocation(o.getProgram(),"aColor"))),o.setColor(J),this.setXAxis(r.series.xAxis),this.setYAxis(r.series.yAxis),this.setThreshold(K,Z),r.drawMode==="POINTS"&&o.setPointSize(2*H(g.marker&&g.marker.radius,.5)*d),o.setSkipTranslation(r.skipTranslation),r.series.type==="bubble"&&o.setBubbleUniforms(r.series,r.zMin,r.zMax,d),o.setDrawAsCircle(n[r.series.type]||!1),h)){if(I>0||r.drawMode!=="LINE_STRIP"){let{x:ce,y:ge,width:pe,height:re}=q(e,r.series);for(i.enable(i.SCISSOR_TEST),i.scissor(ce,u-ge-re,pe,re),Q=0;Q<r.segments.length;Q++)h.render(r.segments[Q].from,r.segments[Q].to,r.drawMode);i.disable(i.SCISSOR_TEST)}if(r.hasMarkers&&de)for(o.setPointSize(2*H(g.marker&&g.marker.radius,5)*d),o.setDrawAsCircle(!0),Q=0;Q<r.segments.length;Q++)h.render(r.segments[Q].from,r.segments[Q].to,"POINTS")}}),s.debug.timeRendering&&console.timeEnd("gl rendering"),this.postRenderCallback&&this.postRenderCallback(this),this.flush()}render(e){if(this.clear(),e.renderer.forExport)return this.renderChart(e);this.isInited?this.renderChart(e):setTimeout(()=>{this.render(e)},1)}setSize(e,i){let s=this.shader;s&&(this.width!==e||this.height!==i)&&(this.width=e,this.height=i,s.bind(),s.setPMatrix(a.orthoMatrix(e,i)))}init(e,i){let s=this.settings;if(this.isInited=!1,!e)return!1;s.debug.timeSetup&&console.time("gl setup");for(let u=0;u<p.length&&(this.gl=e.getContext(p[u],{}),!this.gl);++u);let o=this.gl;if(!o)return!1;i||this.flush(),o.enable(o.BLEND),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),o.disable(o.DEPTH_TEST),o.depthFunc(o.LESS);let h=this.shader=new Tt(o);if(!h)return!1;this.vbuffer=new rt(o,h);let d=(u,c)=>{let r={isReady:!1,texture:b.createElement("canvas"),handle:o.createTexture()},C=r.texture.getContext("2d");this.textureHandles[u]=r,r.texture.width=512,r.texture.height=512,C.mozImageSmoothingEnabled=!1,C.webkitImageSmoothingEnabled=!1,C.msImageSmoothingEnabled=!1,C.imageSmoothingEnabled=!1,C.strokeStyle="rgba(255, 255, 255, 0)",C.fillStyle="#FFF",c(C);try{o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r.handle),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,r.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.bindTexture(o.TEXTURE_2D,null),r.isReady=!0}catch{}};return d("circle",u=>{u.beginPath(),u.arc(256,256,256,0,2*Math.PI),u.stroke(),u.fill()}),d("square",u=>{u.fillRect(0,0,512,512)}),d("diamond",u=>{u.beginPath(),u.moveTo(256,0),u.lineTo(512,256),u.lineTo(256,512),u.lineTo(0,256),u.lineTo(256,0),u.fill()}),d("triangle",u=>{u.beginPath(),u.moveTo(0,512),u.lineTo(256,0),u.lineTo(512,512),u.lineTo(0,512),u.fill()}),d("triangle-down",u=>{u.beginPath(),u.moveTo(0,0),u.lineTo(256,512),u.lineTo(512,0),u.lineTo(0,0),u.fill()}),this.isInited=!0,s.debug.timeSetup&&console.timeEnd("gl setup"),!0}destroy(){let e=this.gl,i=this.shader,s=this.vbuffer;this.flush(),s&&s.destroy(),i&&i.destroy(),e&&(v(this.textureHandles,o=>{o.handle&&e.deleteTexture(o.handle)}),e.canvas.width=1,e.canvas.height=1)}}(function(t){t.setLength=function(e,i,s){return Array.isArray(e)?(e.length=i,e):e[s?"subarray":"slice"](0,i)},t.splice=function(e,i,s,o,h=[]){if(Array.isArray(e))return Array.isArray(h)||(h=Array.from(h)),{removed:e.splice(i,s,...h),array:e};let d=Object.getPrototypeOf(e).constructor,u=e[o?"subarray":"slice"](i,i+s),c=new d(e.length-s+h.length);return c.set(e.subarray(0,i),0),c.set(h,i),c.set(e.subarray(i+s),i+h.length),{removed:u,array:c}}})(_e||(_e={}));let{setLength:f,splice:M}=_e,{fireEvent:Ke,objectEach:at,uniqueKey:lt}=z(),ni=class{constructor(t={}){this.autoId=!t.id,this.columns={},this.id=t.id||lt(),this.modified=this,this.rowCount=0,this.versionTag=lt();let e=0;at(t.columns||{},(i,s)=>{this.columns[s]=i.slice(),e=Math.max(e,i.length)}),this.applyRowCount(e)}applyRowCount(t){this.rowCount=t,at(this.columns,(e,i)=>{e.length!==t&&(this.columns[i]=f(e,t))})}deleteRows(t,e=1){if(e>0&&t<this.rowCount){let i=0;at(this.columns,(s,o)=>{this.columns[o]=M(s,t,e).array,i=s.length}),this.rowCount=i}Ke(this,"afterDeleteRows",{rowIndex:t,rowCount:e}),this.versionTag=lt()}getColumn(t,e){return this.columns[t]}getColumns(t,e){return(t||Object.keys(this.columns)).reduce((i,s)=>(i[s]=this.columns[s],i),{})}getRow(t,e){return(e||Object.keys(this.columns)).map(i=>this.columns[i]?.[t])}setColumn(t,e=[],i=0,s){this.setColumns({[t]:e},i,s)}setColumns(t,e,i){let s=this.rowCount;at(t,(o,h)=>{this.columns[h]=o.slice(),s=o.length}),this.applyRowCount(s),i?.silent||(Ke(this,"afterSetColumns"),this.versionTag=lt())}setRow(t,e=this.rowCount,i,s){let{columns:o}=this,h=i?this.rowCount+1:e+1;at(t,(d,u)=>{let c=o[u]||s?.addColumns!==!1&&Array(h);c&&(i?c=M(c,e,0,!0,[d]).array:c[e]=d,o[u]=c)}),h>this.rowCount&&this.applyRowCount(h),s?.silent||(Ke(this,"afterSetRows"),this.versionTag=lt())}},{getBoostClipRect:ui,isChartSeriesBoosting:nt}=st,{getOptions:hi}=z(),{composed:di,doc:Bt,noop:It,win:Nt}=z(),{addEvent:Ot,destroyObjectProperties:fi,error:Xt,extend:wt,fireEvent:Gt,isArray:Ft,isNumber:Ae,pick:ut,pushUnique:ci,wrap:Le,defined:gi}=z();function Ht(t,e){let i=e.boost;t&&i&&i.target&&i.canvas&&!nt(e.chart)&&t.allocateBufferForSingleSeries(e)}function jt(t){return ut(t&&t.options&&t.options.boost&&t.options.boost.enabled,!0)}function Yt(t,e){let i=t.constructor,s=t.seriesGroup||e.group,o=t.chartWidth,h=t.chartHeight,d=t,u=typeof SVGForeignObjectElement<"u",c=!1;nt(t)?d=t:(d=e,c=!!(e.options.events?.click||e.options.point?.events?.click));let r=d.boost=d.boost||{};if(u=!1,m||(m=Bt.createElement("canvas")),!r.target&&(r.canvas=m,t.renderer.forExport||!u?(d.renderTarget=r.target=t.renderer.image("",0,0,o,h).addClass("highcharts-boost-canvas").add(s),r.clear=function(){r.target.attr({href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="})},r.copy=function(){r.resize(),r.target.attr({href:r.canvas.toDataURL("image/png")})}):(r.targetFo=t.renderer.createElement("foreignObject").add(s),d.renderTarget=r.target=Bt.createElement("canvas"),r.targetCtx=r.target.getContext("2d"),r.targetFo.element.appendChild(r.target),r.clear=function(){r.target.width=r.canvas.width,r.target.height=r.canvas.height},r.copy=function(){r.target.width=r.canvas.width,r.target.height=r.canvas.height,r.targetCtx.drawImage(r.canvas,0,0)}),r.resize=function(){o=t.chartWidth,h=t.chartHeight,(r.targetFo||r.target).attr({x:0,y:0,width:o,height:h}).css({pointerEvents:c?void 0:"none",mixedBlendMode:"normal",opacity:1}).addClass(c?"highcharts-tracker":""),d instanceof i&&d.boost?.markerGroup?.translate(t.plotLeft,t.plotTop)},r.clipRect=t.renderer.clipRect(),(r.targetFo||r.target).attr({zIndex:e.options.zIndex}),d instanceof i&&(d.boost.markerGroup=d.renderer.g().add(s).translate(e.xAxis.pos,e.yAxis.pos))),r.canvas.width=o,r.canvas.height=h,r.clipRect){let C=ui(t,d);r.clipRect.attr(C),C.width===t.clipBox.width&&C.height===t.clipBox.height?s?.clip(t.renderer.clipRect(C.x-4,C.y,C.width+4,C.height+4)):(r.targetFo||r.target).clip(r.clipRect)}return r.resize(),r.clear(),!r.wgl&&(r.wgl=new a(C=>{C.settings.debug.timeBufferCopy&&console.time("buffer copy"),r.copy(),C.settings.debug.timeBufferCopy&&console.timeEnd("buffer copy")}),r.wgl.init(r.canvas)||Xt("[highcharts boost] - unable to init WebGL renderer"),r.wgl.setOptions(t.options.boost||{}),d instanceof i&&r.wgl.allocateBuffer(t)),r.wgl.setSize(o,h),r.wgl}function Wt(t){let e=t.points;if(e){let i,s;for(s=0;s<e.length;s+=1)(i=e[s])&&i.destroyElements&&i.destroyElements()}for(let i of(["graph","area","tracker"].forEach(s=>{let o=t[s];o&&(t[s]=o.destroy())}),t.zones))fi(i,void 0,!0)}function ht(t,e,i,s,o,h){let d=(o=o||0)+(s=s||3e3),u=!0;for(;u&&o<d&&o<t.length;)u=e(t[o],o),++o;u&&(o<t.length?h?ht(t,e,i,s,o,h):Nt.requestAnimationFrame?Nt.requestAnimationFrame(function(){ht(t,e,i,s,o)}):setTimeout(ht,0,t,e,i,s,o):i&&i())}function qt(t,e){let i=t.options,s=t.dataTable.modified.rowCount,o=t.xAxis&&t.xAxis.options,h=t.yAxis&&t.yAxis.options,d=t.colorAxis&&t.colorAxis.options;return s>ut(i.boostThreshold,Number.MAX_VALUE)&&Ae(h.min)&&Ae(h.max)&&(!e||Ae(o.min)&&Ae(o.max))&&(!d||Ae(d.min)&&Ae(d.max))}let Et=(t,e)=>!t.forceCrop&&(nt(t.chart)||(e?e.length:0)>=ut(t.options.boostThreshold,Number.MAX_VALUE));function mi(){let t=this,e=t.chart;e.boost&&e.boost.markerGroup===t.markerGroup&&(t.markerGroup=void 0),e.hoverPoints&&(e.hoverPoints=e.hoverPoints.filter(function(i){return i.series===t})),e.hoverPoint&&e.hoverPoint.series===t&&(e.hoverPoint=void 0)}function pi(){let t=this.boost;t&&t.canvas&&t.target&&(t.wgl&&t.wgl.clear(),t.clear&&t.clear())}function $t(t){let e=t.boost;e&&e.canvas&&e.target&&e.wgl&&!nt(t.chart)&&e.wgl.render(t.chart)}function Kt(t,e){let i=t.options,s=t.xAxis,o=t.pointClass;if(e instanceof o)return e;let h=i.data,d=t.is("scatter"),u=(d&&t.getColumn("x",!0).length?t.getColumn("x",!0):void 0)||(t.getColumn("x").length?t.getColumn("x"):void 0)||i.xData||t.getColumn("x",!0)||!1,c=t.getColumn("y",!0)||i.yData||!1,r=e.i,C=h?.[r]?.color,g=new o(t,d&&u&&c?[u[r],c[r]]:(Ft(h)?h:[])[r],u?u[r]:void 0);if(d&&i?.keys?.length){let L=i.keys;for(let I=L.length-1;I>-1;I--)g[L[I]]=h[r][I]}return g.category=ut(s.categories?s.categories[g.x]:g.x,g.x),g.key=g.name??g.category,g.dist=e.dist,g.distX=e.distX,g.plotX=e.plotX,g.plotY=e.plotY,g.index=r,g.percentage=e.percentage,g.isInside=t.isPointInside(g),C&&(g.color=C),g}function xi(t){let{options:e,xAxis:i,yAxis:s}=this;if(!this.isDirty&&!i.isDirty&&!s.isDirty&&!t)return!1;this.yAxis.setTickInterval();let o=e.boostThreshold||0,h=e.cropThreshold,d=this.getColumn("x"),u=i.getExtremes(),c=u.max??Number.MAX_VALUE,r=u.min??-Number.MAX_VALUE,C=this.getColumn("y"),g=s.getExtremes(),L=g.max??Number.MAX_VALUE,I=g.min??-Number.MAX_VALUE;if(!this.boosted&&i.old&&s.old&&r>=(i.old.min??-Number.MAX_VALUE)&&c<=(i.old.max??Number.MAX_VALUE)&&I>=(s.old.min??-Number.MAX_VALUE)&&L<=(s.old.max??Number.MAX_VALUE))return this.dataTable.modified.setColumns({x:d,y:C}),!0;let $=this.dataTable.rowCount;if(!o||$<o||h&&!this.forceCrop&&!this.getExtremesFromAll&&!e.getExtremesFromAll&&$<h)return this.dataTable.modified.setColumns({x:d,y:C}),!0;let K=[],Z=[],de=[],fe=!(Ae(u.max)||Ae(u.min)),Q=!(Ae(g.max)||Ae(g.min)),me=!1,j,J=d[0],ce=d[0],ge,pe=C?.[0],re=C?.[0];for(let F=0,Me=d.length;F<Me;++F)j=d[F],ge=C?.[F],j>=r&&j<=c&&ge>=I&&ge<=L?(K.push({x:j,y:ge}),Z.push(j),de.push(ge),fe&&(J=Math.max(J,j),ce=Math.min(ce,j)),Q&&(pe=Math.max(pe,ge),re=Math.min(re,ge))):me=!0;return fe&&(i.dataMax=Math.max(J,i.dataMax||0),i.dataMin=Math.min(ce,i.dataMin||0)),Q&&(s.dataMax=Math.max(pe,s.dataMax||0),s.dataMin=Math.min(re,s.dataMin||0)),this.cropped=me,this.cropStart=0,me&&this.dataTable.modified===this.dataTable&&(this.dataTable.modified=new ni),this.dataTable.modified.setColumns({x:Z,y:de}),Et(this,Z)||(this.processedData=K),!0}function vi(){let t=this.options||{},e=this.chart,i=e.boost,s=this.boost,o=this.xAxis,h=this.yAxis,d=t.xData||this.getColumn("x",!0),u=t.yData||this.getColumn("y",!0),c=this.getColumn("low",!0),r=this.getColumn("high",!0),C=this.processedData||t.data,g=o.getExtremes(),L=g.min-(o.minPointOffset||0),I=g.max+(o.minPointOffset||0),$=h.getExtremes(),K=$.min-(h.minPointOffset||0),Z=$.max+(h.minPointOffset||0),de={},fe=!!this.sampling,Q=t.enableMouseTracking,me=t.threshold,j=this.pointArrayMap&&this.pointArrayMap.join(",")==="low,high",J=!!t.stacking,ce=this.cropStart||0,ge=this.requireSorting,pe=!d,re=t.findNearestPointBy==="x",F=(this.getColumn("x").length?this.getColumn("x"):void 0)||this.options.xData||this.getColumn("x",!0),Me=ut(t.lineWidth,1),Fe=t.nullInteraction&&K,dt=e.tooltip,He=!1,ft,Se=h.getThreshold(me),Ze,Ue,Re,ke;if(!this.boosted||(this.points?.forEach(V=>{V?.destroyElements?.()}),this.points=[],dt&&!dt.isHidden?(e.hoverPoint?.series===this||e.hoverPoints?.some(V=>V.series===this))&&(e.hoverPoint=e.hoverPoints=void 0,dt.hide(0)):e.hoverPoints&&(e.hoverPoints=e.hoverPoints.filter(V=>V.series!==this)),o.isPanning||h.isPanning)||(He=Yt(e,this),e.boosted=!0,!this.visible))return;(this.points||this.graph)&&Wt(this),nt(e)?(this.markerGroup&&this.markerGroup!==i?.markerGroup&&this.markerGroup.destroy(),this.markerGroup=i?.markerGroup,s&&s.target&&(this.renderTarget=s.target=s.target.destroy())):(this.markerGroup===i?.markerGroup&&(this.markerGroup=void 0),this.markerGroup=this.plotGroup("markerGroup","markers","visible",1,e.seriesGroup).addClass("highcharts-tracker"));let je=this.points=[],Te=(V,ne,S,U)=>{let R=!!F&&F[ce+S],ue=D=>{e.inverted&&(D=o.len-D,ne=h.len-ne),je.push({destroy:It,x:R,clientX:D,plotX:D,plotY:ne,i:ce+S,percentage:U})};V=Math.ceil(V),le=re?V:V+","+ne,Q&&(de[le]?R===F[F.length-1]&&(je.length--,ue(V)):(de[le]=!0,ue(V)))};this.buildKDTree=It,Gt(this,"renderCanvas"),i&&s?.target&&Me>1&&this.is("line")&&(i.lineWidthFilter?.remove(),i.lineWidthFilter=e.renderer.definition({tagName:"filter",children:[{tagName:"feMorphology",attributes:{operator:"dilate",radius:.25*Me}}],attributes:{id:"linewidth"}}),s.target.attr({filter:"url(#linewidth)"})),He&&(Ht(He,this),He.pushSeries(this),$t(this));let ze=He.settings;e.renderer.forExport||(ze.debug.timeKDTree&&console.time("kd tree building"),ht(J?this.data.slice(ce):d||C,function(V,ne){let S=e.index===void 0,U,R,ue,D,xe,ve=!1,Ve=!0;return!gi(V)||(!S&&(pe?(U=V[0],R=V[1]):(U=V,R=u[ne]??Fe??null),j?(pe&&(R=V.slice(1,3)),ve=c[ne],R=r[ne]):J&&(U=V.x,ve=(R=V.stackY)-V.y,xe=V.percentage),ge||(Ve=(R||0)>=K&&R<=Z),R!==null&&U>=L&&U<=I&&Ve&&(ue=o.toPixels(U,!0),fe?((Re===void 0||ue===ft)&&(j||(ve=R),(ke===void 0||R>Ue)&&(Ue=R,ke=ne),(Re===void 0||ve<Ze)&&(Ze=ve,Re=ne)),re&&ue===ft||(Re!==void 0&&(D=h.toPixels(Ue,!0),Se=h.toPixels(Ze,!0),Te(ue,D,ke,xe),Se!==D&&Te(ue,Se,Re,xe)),Re=ke=void 0,ft=ue)):Te(ue,D=Math.ceil(h.toPixels(R,!0)),ne,xe))),!S)},()=>{Gt(this,"renderedCanvas"),delete this.buildKDTree,this.options&&this.buildKDTree(),ze.debug.timeKDTree&&console.timeEnd("kd tree building")}))}function bi(t){let e=!0;if(this.chart.options&&this.chart.options.boost&&(e=this.chart.options.boost.enabled===void 0||this.chart.options.boost.enabled),!e||!this.boosted)return t.call(this);this.chart.boosted=!0;let i=Yt(this.chart,this);i&&(Ht(i,this),i.pushSeries(this)),$t(this)}function yi(t){if(this.boosted){if(qt(this))return{};if(this.xAxis.isPanning||this.yAxis.isPanning)return this}return t.apply(this,[].slice.call(arguments,1))}function Ai(t){let e=this.options.data;if(jt(this.chart)&&P[this.type]){let s=this.is("scatter")&&!this.is("bubble")&&!this.is("treemap")&&!this.is("heatmap");if(!Et(this,e)||s||this.is("treemap")||this.options.stacking||!qt(this,!0)){if(this.boosted&&(this.xAxis?.isPanning||this.yAxis?.isPanning))return;s&&this.yAxis.type!=="treegrid"?xi.call(this,arguments[1]):t.apply(this,[].slice.call(arguments,1)),e=this.getColumn("x",!0)}if(this.boosted=Et(this,e),this.boosted){let o;this.options.data?.length&&(Ae(o=this.getFirstValidPoint(this.options.data))||Ft(o)||this.is("treemap")||Xt(12,!1,this.chart));var i=this;i.boost=i.boost||{getPoint:d=>Kt(i,d)};let h=i.boost.altered=[];if(["allowDG","directTouch","stickyTracking"].forEach(d=>{h.push({prop:d,val:i[d],own:Object.hasOwnProperty.call(i,d)})}),i.allowDG=!1,i.directTouch=!1,i.stickyTracking=!0,i.finishedAnimating=!0,i.labelBySeries&&(i.labelBySeries=i.labelBySeries.destroy()),i.is("scatter")&&!i.is("treemap")&&i.data.length){for(let d of i.data)d?.destroy?.();i.data.length=0,i.points.length=0,delete i.processedData}}else(function(o){let h=o.boost,d=o.chart,u=d.boost;if(u?.markerGroup)for(let c of(u.markerGroup.destroy(),u.markerGroup=void 0,d.series))c.markerGroup=void 0,c.markerGroup=c.plotGroup("markerGroup","markers","visible",1,d.seriesGroup).addClass("highcharts-tracker");h&&((h.altered||[]).forEach(c=>{c.own?o[c.prop]=c.val:delete o[c.prop]}),h.clear&&h.clear()),(d.seriesGroup||o.group)?.clip()})(this)}else t.apply(this,[].slice.call(arguments,1))}function _i(t){let e=t.apply(this,[].slice.call(arguments,1));return this.boost&&e?this.boost.getPoint(e):e}let Pi={compose:function(t,e,i,s){if(ci(di,"Boost.Series")){let o=hi().plotOptions,h=t.prototype;if(Ot(t,"destroy",mi),Ot(t,"hide",pi),s&&(h.renderCanvas=vi),Le(h,"getExtremes",yi),Le(h,"processData",Ai),Le(h,"searchPoint",_i),["translate","generatePoints","drawTracker","drawPoints","render"].forEach(d=>(function(u,c,r){function C(g){let L=this.options.stacking&&(r==="translate"||r==="generatePoints");this.boosted&&!L&&jt(this.chart)&&this.type!=="heatmap"&&this.type!=="treemap"&&P[this.type]&&this.options.boostThreshold!==0?r==="render"&&this.renderCanvas&&this.renderCanvas():g.call(this)}if(Le(u,r,C),r==="translate")for(let g of["column","arearange","columnrange","heatmap","treemap"])c[g]&&Le(c[g].prototype,r,C)})(h,e,d)),Le(i.prototype,"firePointEvent",function(d,u,c){if(u==="click"&&this.series.boosted){let r=c.point;if((r.dist||r.distX)>=(r.series.options.marker?.radius??10))return}return d.apply(this,[].slice.call(arguments,1))}),w.forEach(d=>{let u=o[d];u&&(u.boostThreshold=5e3,u.boostData=[],e[d].prototype.fillOpacity=!0)}),s){let{area:d,areaspline:u,bubble:c,column:r,heatmap:C,scatter:g,treemap:L}=e;if(d&&wt(d.prototype,{fill:!0,fillOpacity:!0,sampling:!0}),u&&wt(u.prototype,{fill:!0,fillOpacity:!0,sampling:!0}),c){let I=c.prototype;delete I.buildKDTree,Le(I,"markerAttribs",function($){return!this.boosted&&$.apply(this,[].slice.call(arguments,1))})}r&&wt(r.prototype,{fill:!0,sampling:!0}),g&&(g.prototype.fill=!0),[C,L].forEach(I=>{I&&Le(I.prototype,"drawPoints",bi)})}}return t},destroyGraphics:Wt,eachAsync:ht,getPoint:Kt},Ci={defaultHTMLColorMap:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},{doc:Mi,win:ki}=z(),{addEvent:Ti,error:wi}=z(),Zt=["webgl","experimental-webgl","moz-webgl","webkit-3d"];function Qt(){let t;if(ki.WebGLRenderingContext!==void 0){t=Mi.createElement("canvas");for(let e=0;e<Zt.length;++e)try{if(t.getContext(Zt[e])!=null)return!0}catch{}}return!1}let Jt={compose:function(t,e,i,s,o,h){let d=Qt();d||(z().initCanvasBoost!==void 0?z().initCanvasBoost():wi(26)),h&&!h.names.lightgoldenrodyellow&&(h.names={...h.names,...Ci.defaultHTMLColorMap}),st.compose(t,d),Pi.compose(i,s,o,d),Ti(e,"setExtremes",function(u){for(let c of[this.chart,...this.series].map(r=>r.renderTarget).filter(Boolean)){let{horiz:r,pos:C}=this,g=r?"scaleX":"scaleY",L=r?"translateX":"translateY",I=c?.[g]??1,$=1,K=0,Z=1,de="none";this.isPanning&&($=(u.scale??1)*I,K=(c?.[L]||0)-$*(u.move||0)+I*C-$*C,Z=.7,de="blur(3px)"),c?.attr({[g]:$,[L]:K}).css({transition:"250ms filter, 250ms opacity",filter:de,opacity:Z})}})},hasWebGLSupport:Qt},Ge=z();Ge.hasWebGLSupport=Jt.hasWebGLSupport,Jt.compose(Ge.Chart,Ge.Axis,Ge.Series,Ge.seriesTypes,Ge.Point,Ge.Color);let Ei=z();return O.default})())})(yt)),yt.exports}Oi();const Xi={class:"chart-skeleton"},Gi={class:"skeleton-chart-wrapper"},Fi={class:"skeleton-y-axis"},Hi={class:"skeleton-chart-area"},ji={class:"skeleton-grid"},Yi={class:"skeleton-x-axis"},Wi=ai({__name:"ChartSkeleton",setup(At){return(Ne,se)=>(ie(),Ee("div",Xi,[se[1]||(se[1]=E("div",{class:"skeleton-header"},[E("div",{class:"skeleton-bar title-bar"}),E("div",{class:"skeleton-bar subtitle-bar"})],-1)),E("div",Gi,[E("div",Fi,[(ie(),Ee(et,null,tt(6,B=>E("div",{class:"skeleton-bar y-label",key:B})),64))]),E("div",Hi,[E("div",ji,[(ie(),Ee(et,null,tt(5,B=>E("div",{class:"grid-line horizontal",key:"h"+B})),64)),(ie(),Ee(et,null,tt(8,B=>E("div",{class:"grid-line vertical",key:"v"+B})),64))]),se[0]||(se[0]=E("svg",{class:"skeleton-lines",viewBox:"0 0 100 50",preserveAspectRatio:"none"},[E("path",{d:"M0,40 Q25,30 50,25 T100,15",fill:"none",stroke:"#e0e0e0","stroke-width":"0.5"}),E("path",{d:"M0,35 Q25,25 50,30 T100,20",fill:"none",stroke:"#e0e0e0","stroke-width":"0.5"}),E("path",{d:"M0,30 Q25,35 50,35 T100,25",fill:"none",stroke:"#e0e0e0","stroke-width":"0.5"})],-1))]),E("div",Yi,[(ie(),Ee(et,null,tt(8,B=>E("div",{class:"skeleton-bar x-label",key:B})),64))])]),se[2]||(se[2]=Si('<div class="skeleton-footer" data-v-d9481205><div class="skeleton-bar footer-bar" data-v-d9481205></div></div><div class="loading-overlay" data-v-d9481205><div class="loading-spinner" data-v-d9481205></div><div class="loading-text" data-v-d9481205>加载中...</div></div>',2))]))}}),ri=li(Wi,[["__scopeId","data-v-d9481205"]]),qi={style:{display:"flex",gap:"16px","align-items":"center","flex-wrap":"wrap"}},$i={key:0},Ki={style:{display:"flex",gap:"16px","align-items":"center","flex-wrap":"wrap","margin-top":"10px"}},Zi={style:{flex:"1","min-width":"100px","max-width":"200px"}},Qi={style:{flex:"1","min-width":"100px","max-width":"200px"}},Ji={key:0,style:{display:"flex",gap:"16px","align-items":"center"}},es={style:{"padding-top":"24px"}},ts={style:{display:"flex","justify-content":"space-between","align-items":"center"}},is={style:{"font-size":"16px","font-weight":"500"}},ss={key:0,style:{"font-size":"14px",color:"#666"}},os={style:{"text-align":"center",color:"#666","font-size":"12px"}},rs=ai({__name:"Charts",setup(At){const Ne=he([]),se=he(!1),B=he(""),le=he(""),m=he("voltage"),_e=he(!1),Pe=he(!1),N=he({}),oe=he(null);let O=null;const Ce=he(""),z=he([]),w=he(0),P=he(void 0),Y=he(10),Oe=Je(()=>{switch(m.value){case"voltage":case"voltage_range":case"voltage_avg":return 0;case"pump_pressure":case"inlet_outlet_pressure":case"oxygen_hydrogen_outlet_pressure":case"pressure_difference":return 2;case"specific_gravity":return 3;case"oxygen_hydrogen_outlet_temp":return 1;case"oxygen_hydrogen_cross":return 2;case"hydrogen_flow_meter":return 2;default:return 2}}),Xe=Je(()=>{const b=new Set;return Ne.value.forEach(l=>{l.machine_name&&b.add(l.machine_name)}),Array.from(b).sort((l,y)=>{const _=parseInt(l.split("#")[0].trim())||0,k=parseInt(y.split("#")[0].trim())||0;return _-k})}),_t=Je(()=>{if(!B.value)return[];const b=new Set;return Ne.value.forEach(l=>{l.machine_name===B.value&&l.machine_model&&b.add(l.machine_model)}),Array.from(b).sort()}),it=Je(()=>!B.value||!le.value?"":`${B.value} - ${le.value}`),ct=Je(()=>{const b=N.value[m.value];return b?m.value==="voltage"?`${Object.keys(b).length} 条曲线`:["inlet_outlet_pressure","oxygen_hydrogen_outlet_pressure","oxygen_hydrogen_outlet_temp","oxygen_hydrogen_cross"].includes(m.value)?"2 条曲线":"1 条曲线":""}),st=Je(()=>{const b=N.value[m.value];if(!b)return 0;if(m.value==="voltage")return Object.values(b).reduce((l,y)=>y.x&&y.y?l+Math.min(y.x.length,y.y.length):l,0);if(["inlet_outlet_pressure","oxygen_hydrogen_outlet_pressure","oxygen_hydrogen_outlet_temp","oxygen_hydrogen_cross"].includes(m.value)){const l=b;let y=0;return Object.values(l).forEach(_=>{_.x&&_.y&&(y+=Math.min(_.x.length,_.y.length))}),y}else{const l=b;return l.x&&l.y?Math.min(l.x.length,l.y.length):0}}),Pt=async()=>{se.value=!0;try{const l=await(await fetch("/api/get/device_list")).json();l.status==="success"?Ne.value=l.data:$e.error("加载设备列表失败")}catch(b){console.error("Error loading device list:",b),$e.error("加载设备列表失败")}finally{se.value=!1}},De=async(b="voltage")=>{if(!B.value||!le.value){$e.warning("请先选择设备名称和型号");return}if(b!=="voltage"&&!Ce.value){$e.warning("正在加载起始时间，请稍候..."),await De("voltage"),Ce.value&&await De(b);return}if(N.value[b]){ye();return}_e.value=!0;try{let _=`/api/get/one_device/${{voltage:"cell",voltage_range:"voltage_range",voltage_avg:"voltage_avg",pump_pressure:"pump_pressure",specific_gravity:"specific_gravity",hydrogen_flow_meter:"hydrogen_flow_meter",inlet_outlet_pressure:"inlet_outlet_pressure",oxygen_hydrogen_outlet_pressure:"oxygen_hydrogen_outlet_pressure",oxygen_hydrogen_outlet_temp:"oxygen_hydrogen_outlet_temp",oxygen_hydrogen_cross:"oxygen_hydrogen_cross",pressure_difference:"pressure_difference"}[b]}?machine_name=${encodeURIComponent(B.value)}&machine_model=${encodeURIComponent(le.value)}`;b!=="voltage"&&Ce.value&&(_+=`&start_time=${encodeURIComponent(Ce.value)}`);const v=await(await fetch(_)).json();v.status==="success"?(b==="voltage"&&v.global_start_time&&(Ce.value=v.global_start_time,console.log("保存 global_start_time:",Ce.value)),N.value[b]=v.data,Pe.value=!0,si(()=>{ye()}),$e.success("数据加载成功")):$e.error("加载数据失败")}catch(l){console.error("Error loading chart data:",l),$e.error("加载数据失败")}finally{_e.value=!1}},Ct=()=>{B.value?localStorage.setItem("cached_machine_name",B.value):localStorage.removeItem("cached_machine_name"),le.value="",localStorage.removeItem("cached_machine_model"),O&&(O.destroy(),O=null),Pe.value=!1,N.value={},Ce.value="",z.value=[],m.value="voltage",w.value=0,P.value=void 0,Y.value=10},Mt=async()=>{le.value?localStorage.setItem("cached_machine_model",le.value):localStorage.removeItem("cached_machine_model"),O&&(O.destroy(),O=null),Pe.value=!1,N.value={},Ce.value="",z.value=[],m.value="voltage",w.value=0,P.value=void 0,Y.value=10,le.value&&(await si(),De("voltage"))},kt=()=>{w.value=0,P.value=void 0,Y.value=10,De(m.value)},ot=()=>{const b=N.value[m.value];if(!b)return 0;let l=0;if(m.value==="voltage")Object.values(b).forEach(y=>{if(y.y&&y.y.length>0){const _=Math.max(...y.y);_>l&&(l=_)}});else if(["inlet_outlet_pressure","oxygen_hydrogen_outlet_pressure","oxygen_hydrogen_outlet_temp","oxygen_hydrogen_cross"].includes(m.value))Object.values(b).forEach(_=>{if(_.y&&_.y.length>0){const k=q(_);if(k.y.length>0){const v=Math.max(...k.y);v>l&&(l=v)}}});else{const y=b;if(y.y&&y.y.length>0){const _=q(y);_.y&&_.y.length>0&&(l=Math.max(..._.y))}}return console.info(l*1.1),l},Tt=()=>{const b=ot();w.value=0,P.value=b*1.1,Y.value=Math.ceil(b*.05),O&&O.yAxis&&O.yAxis[0]&&O.yAxis[0].update({min:0,max:b*1.1},!0)},rt=()=>{O&&O.yAxis&&O.yAxis[0]&&O.yAxis[0].update({min:w.value,max:P.value||void 0},!0)},q=b=>{if(!z.value||z.value.length===0)return b;const l=new Set(z.value),y={x:[],y:[],t:[]};for(let _=0;_<b.x.length;_++)l.has(b.x[_])&&(y.x.push(b.x[_]),y.y.push(b.y[_]),b.t&&b.t[_]&&y.t.push(b.t[_]));return y},ye=()=>{if(!oe.value||!N.value||!N.value[m.value])return;O&&O.destroy();const b=["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#EFC94C","#17BECF","#4C72B0","#DD8452","#55A868","#C44E52","#8172B3","#937860","#64B5CD","#E99675","#97BBCD","#B5BD89","#FF6F61","#6A5ACD"];let l=[],y="",_="",k,v,H=0;if(m.value==="voltage"){l=Object.entries(N.value.voltage).map(([p,a],f)=>({type:"line",name:p,data:a.x.map((M,Ke)=>({x:M,y:a.y[Ke],t:a.t?a.t[Ke]:void 0})),color:b[f%b.length],marker:{enabled:!1}})),y="电压 (mV)",_="小室电压";const x=ot()*1.1;k=0,v=x,P.value===void 0?(w.value=0,P.value=x,Y.value=Math.ceil(x*.05)):(k=w.value,v=P.value);const n=l[0];n&&"data"in n&&Array.isArray(n.data)&&n.data.length>0?(z.value=n.data.map(a=>a.x),H=Math.max(...z.value)*2):z.value=[]}else if(m.value==="voltage_range"){const x=N.value[m.value];if(x.x&&x.y){const n=q(x);l=[{type:"line",name:"极差",data:n.x.map((a,f)=>({x:a,y:n.y[f],t:n.t?n.t[f]:void 0})),color:"#7cb5ec",marker:{enabled:!1}}];const p=n.y.filter(a=>a!=null);if(p.length>0){const a=Math.max(...p),f=a*.1;k=0,v=a+f,P.value===void 0?(w.value=0,P.value=v,Y.value=Math.ceil(v*.05)):(k=w.value,v=P.value)}n.x.length>0&&(H=Math.max(...n.x)*2)}else l=[];y="极差 (mV)",_="小室极差"}else if(m.value==="voltage_avg"){const x=N.value[m.value];if(x.x&&x.y){const n=q(x);l=[{type:"line",name:"平均电压",data:n.x.map((a,f)=>({x:a,y:n.y[f],t:n.t?n.t[f]:void 0})),color:"#FF7F0E",marker:{enabled:!1}}];const p=n.y.filter(a=>a!=null);if(p.length>0){const a=Math.max(...p),f=a*.1;k=0,v=a+f,P.value===void 0?(w.value=0,P.value=v,Y.value=Math.ceil(v*.05)):(k=w.value,v=P.value)}n.x.length>0&&(H=Math.max(...n.x)*2)}else l=[];y="小室平均电压 (mV)",_="小室电压平均值"}else if(m.value==="pump_pressure"){const x=N.value[m.value];if(x.x&&x.y){const n=q(x);l=[{type:"line",name:"泵后压力",data:n.x.map((a,f)=>({x:a,y:n.y[f],t:n.t?n.t[f]:void 0})),color:"#2CA02C",marker:{enabled:!1}}];const p=n.y.filter(a=>a!=null);if(p.length>0){const a=Math.max(...p),f=a*.1;k=0,v=a+f,P.value===void 0?(w.value=0,P.value=v,Y.value=Math.ceil(v*.05)):(k=w.value,v=P.value)}n.x.length>0&&(H=Math.max(...n.x)*2)}else l=[];y="泵压 (Bar)",_="泵后压力"}else if(m.value==="specific_gravity"){const x=N.value[m.value];if(x.x&&x.y){const n=q(x);l=[{type:"line",name:"碱液比重",data:n.x.map((a,f)=>({x:a,y:n.y[f],t:n.t?n.t[f]:void 0})),color:"#D62728",marker:{enabled:!1}}];const p=n.y.filter(a=>a!=null);if(p.length>0){const a=Math.max(...p),f=a*.1;k=0,v=a+f,P.value===void 0?(w.value=0,P.value=v,Y.value=Math.ceil(v*.05)):(k=w.value,v=P.value)}n.x.length>0&&(H=Math.max(...n.x)*2)}else l=[];y="比重 (g/cm³)",_="碱液比重"}else if(m.value==="inlet_outlet_pressure"){const x=N.value[m.value];if(x.inlet_pressure&&x.oxygen_outlet_pressure){const n=q(x.inlet_pressure),p=q(x.oxygen_outlet_pressure);l=[{type:"line",name:"进槽压力",data:n.x.map((f,M)=>({x:f,y:n.y[M],t:n.t?n.t[M]:void 0})),color:"#1F77B4",marker:{enabled:!1}},{type:"line",name:"氧侧出槽压力",data:p.x.map((f,M)=>({x:f,y:p.y[M],t:p.t?p.t[M]:void 0})),color:"#FF7F0E",marker:{enabled:!1}}];const a=[...n.y,...p.y].filter(f=>f!=null);if(a.length>0){const f=Math.max(...a),M=f*.1;k=0,v=f+M,P.value===void 0?(w.value=0,P.value=v,Y.value=Math.ceil(v*.05)):(k=w.value,v=P.value)}n.x.length>0&&(H=Math.max(...n.x)*2)}else l=[];y="压差 (Bar)",_="电解槽进出槽压力"}else if(m.value==="oxygen_hydrogen_outlet_pressure"){const x=N.value[m.value];if(x.oxygen_outlet_pressure&&x.hydrogen_outlet_pressure){const n=q(x.oxygen_outlet_pressure),p=q(x.hydrogen_outlet_pressure);l=[{type:"line",name:"氧侧出槽压力",data:n.x.map((f,M)=>({x:f,y:n.y[M],t:n.t?n.t[M]:void 0})),color:"#2CA02C",marker:{enabled:!1}},{type:"line",name:"氢侧出槽压力",data:p.x.map((f,M)=>({x:f,y:p.y[M],t:p.t?p.t[M]:void 0})),color:"#D62728",marker:{enabled:!1}}];const a=[...n.y,...p.y].filter(f=>f!=null);if(a.length>0){const f=Math.max(...a),M=f*.1;k=0,v=f+M,P.value===void 0?(w.value=0,P.value=v,Y.value=Math.ceil(v*.05)):(k=w.value,v=P.value)}n.x.length>0&&(H=Math.max(...n.x)*2)}else l=[];y="压差 (Bar)",_="电解槽氢氧侧出槽压力"}else if(m.value==="oxygen_hydrogen_outlet_temp"){const x=N.value[m.value];if(x.oxygen_outlet_temp&&x.hydrogen_outlet_temp){const n=q(x.oxygen_outlet_temp),p=q(x.hydrogen_outlet_temp);l=[{type:"line",name:"氧侧出槽温度",data:n.x.map((f,M)=>({x:f,y:n.y[M],t:n.t?n.t[M]:void 0})),color:"#FF7F0E",marker:{enabled:!1}},{type:"line",name:"氢气出槽温度",data:p.x.map((f,M)=>({x:f,y:p.y[M],t:p.t?p.t[M]:void 0})),color:"#9467BD",marker:{enabled:!1}}];const a=[...n.y,...p.y].filter(f=>f!=null);if(a.length>0){const f=Math.max(...a),M=f*.1;k=0,v=f+M,P.value===void 0?(w.value=0,P.value=v,Y.value=Math.ceil(v*.05)):(k=w.value,v=P.value)}n.x.length>0&&(H=Math.max(...n.x)*2)}else l=[];y="温度 (°C)",_="电解槽氢氧侧出槽温度"}else if(m.value==="oxygen_hydrogen_cross"){const x=N.value[m.value];if(x.oxygen_in_hydrogen&&x.hydrogen_in_oxygen){const n=q(x.oxygen_in_hydrogen),p=q(x.hydrogen_in_oxygen);l=[{type:"line",name:"氧中氢",data:n.x.map((f,M)=>({x:f,y:n.y[M],t:n.t?n.t[M]:void 0})),color:"#17BECF",marker:{enabled:!1}},{type:"line",name:"氢中氧",data:p.x.map((f,M)=>({x:f,y:p.y[M],t:p.t?p.t[M]:void 0})),color:"#8C564B",marker:{enabled:!1}}];const a=[...n.y,...p.y].filter(f=>f!=null);if(a.length>0){const f=Math.max(...a),M=f*.1;k=0,v=f+M,P.value===void 0?(w.value=0,P.value=v,Y.value=Math.ceil(v*.05)):(k=w.value,v=P.value)}n.x.length>0&&(H=Math.max(...n.x)*2)}else l=[];y="含量 (ppm)",_="氧中氢/氢中氧"}else if(m.value==="pressure_difference"){const x=N.value[m.value];if(x.x&&x.y){const n=q(x);l=[{type:"line",name:"Pressure Difference",data:n.x.map((a,f)=>({x:a,y:n.y[f],t:n.t?n.t[f]:void 0})),color:"#E74C3C",marker:{enabled:!1}}];const p=n.y.filter(a=>a!=null);if(p.length>0){const a=Math.max(...p),f=a*.1;k=0,v=a+f,P.value===void 0?(w.value=0,P.value=v,Y.value=Math.ceil(v*.05)):(k=w.value,v=P.value)}n.x.length>0&&(H=Math.max(...n.x)*2)}else l=[];y="压力差 (Bar)",_="电解槽进出口压差"}else{const x=N.value[m.value];if(x.x&&x.y){const n=q(x);l=[{type:"line",name:"Hydrogen Flow",data:n.x.map((a,f)=>({x:a,y:n.y[f],t:n.t?n.t[f]:void 0})),color:"#9467BD",marker:{enabled:!1}}];const p=n.y.filter(a=>a!=null);if(p.length>0){const a=Math.max(...p),f=a*.1;k=0,v=a+f,P.value===void 0?(w.value=0,P.value=v,Y.value=Math.ceil(v*.05)):(k=w.value,v=P.value)}n.x.length>0&&(H=Math.max(...n.x)*2)}else l=[];y="氢流量",_="氢气流量"}O=Ii.chart(oe.value,{accessibility:{enabled:!1},boost:{useGPUTranslations:!0,seriesThreshold:1},chart:{type:"line",zooming:{type:"x"},panning:{enabled:!0,type:"x"},animation:!1,panKey:"shift"},title:{text:_},xAxis:{title:{text:"时间 (小时)"},crosshair:!0,max:H},yAxis:{title:{text:y},crosshair:!0,min:k,max:v,startOnTick:!1,endOnTick:!1},legend:{enabled:["voltage","inlet_outlet_pressure","oxygen_hydrogen_outlet_pressure","oxygen_hydrogen_outlet_temp","oxygen_hydrogen_cross"].includes(m.value),layout:"horizontal",align:"center",verticalAlign:"bottom",maxHeight:80},tooltip:{shared:!0,useHTML:!0,animation:!1,positioner:function(x,n,p){const a=this.chart;let f=p.plotX+a.plotLeft+10,M=p.plotY+a.plotTop-n/2;return f+x>a.plotWidth+a.plotLeft&&(f=p.plotX+a.plotLeft-x-10),M<a.plotTop&&(M=a.plotTop),M+n>a.plotTop+a.plotHeight&&(M=a.plotTop+a.plotHeight-n),{x:f,y:M}},formatter:function(){const x=this.x;let n='<div style="font-size: 14px;">';if(n+='<div style="text-align: center; font-weight: 500; margin-bottom: 8px; padding-bottom: 4px; border-bottom: 1px solid #eee;">',n+=`时间: <span style="color: #409EFF">${x.toFixed(0)}</span> 小时`,this.points&&this.points.length>0&&this.points[0].options.t&&(n+=`<br><span style="font-size: 12px; color: #909399;">${this.points[0].options.t}</span>`),n+="</div>",this.points){let p="",a=2;m.value==="voltage"||m.value==="voltage_range"||m.value==="voltage_avg"?(p="mV",a=0):m.value==="pump_pressure"||m.value==="inlet_outlet_pressure"||m.value==="oxygen_hydrogen_outlet_pressure"||m.value==="pressure_difference"?(p="Mpa",a=2):m.value==="specific_gravity"?(p="mg/cm³",a=3):m.value==="oxygen_hydrogen_outlet_temp"?(p="℃",a=1):m.value==="oxygen_hydrogen_cross"?(p="ppm",a=2):m.value==="hydrogen_flow_meter"&&(p="",a=2),this.points.forEach(f=>{n+='<div style="margin: 4px 0; display: flex; align-items: center; justify-content: space-between;">',n+='<span style="display: flex; align-items: center;">',n+=`<span style="display: inline-block; width: 12px; height: 12px; border-radius: 50%; background-color: ${f.series.color}; margin-right: 8px;"></span>`,n+=`<span style="font-weight: 500;">${f.series.name}</span>`,n+="</span>",n+=`<span style="font-weight: bold; color: ${f.series.color};">&nbsp;${Number(f.y).toFixed(a)}${p?" "+p:""}</span>`,n+="</div>"})}return n+="</div>",n}},plotOptions:{line:{animation:!1,marker:{enabled:!1},states:{hover:{enabled:!0,lineWidth:4}}}},series:l,credits:{enabled:!1},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{enabled:!1}}}]}})};return Ui(async()=>{await Pt();const b=localStorage.getItem("cached_machine_name"),l=localStorage.getItem("cached_machine_model");if(b&&l){const y=Ne.value.some(k=>k.machine_name===b),_=Ne.value.some(k=>k.machine_name===b&&k.machine_model===l);y&&_&&(B.value=b,le.value=l,await De("voltage"))}}),Ri(()=>{O&&O.destroy()}),(b,l)=>{const y=Ie("el-radio-button"),_=Ie("el-radio-group"),k=Ie("el-option"),v=Ie("el-select"),H=Ie("el-input-number"),x=Ie("el-button"),n=Ie("el-card"),p=Ie("el-empty");return ie(),We(n,null,{default:G(()=>[W(n,{style:{"margin-bottom":"20px"}},{default:G(()=>[E("div",qi,[Pe.value?(ie(),Ee("div",$i,[W(_,{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=a=>m.value=a),onChange:kt,size:"large"},{default:G(()=>[W(y,{label:"voltage"},{default:G(()=>[...l[5]||(l[5]=[be("小室电压",-1)])]),_:1}),W(y,{label:"voltage_avg"},{default:G(()=>[...l[6]||(l[6]=[be("小室电压平均值",-1)])]),_:1}),W(y,{label:"voltage_range"},{default:G(()=>[...l[7]||(l[7]=[be("小室极差",-1)])]),_:1}),W(y,{label:"pump_pressure"},{default:G(()=>[...l[8]||(l[8]=[be("泵后压力",-1)])]),_:1}),W(y,{label:"specific_gravity"},{default:G(()=>[...l[9]||(l[9]=[be("碱液比重",-1)])]),_:1}),W(y,{label:"hydrogen_flow_meter"},{default:G(()=>[...l[10]||(l[10]=[be("氢气流量",-1)])]),_:1}),W(y,{label:"inlet_outlet_pressure"},{default:G(()=>[...l[11]||(l[11]=[be("电解槽进出槽压力",-1)])]),_:1}),W(y,{label:"pressure_difference"},{default:G(()=>[...l[12]||(l[12]=[be("电解槽进出口压差",-1)])]),_:1}),W(y,{label:"oxygen_hydrogen_outlet_pressure"},{default:G(()=>[...l[13]||(l[13]=[be("电解槽氢氧侧出槽压力",-1)])]),_:1}),W(y,{label:"oxygen_hydrogen_outlet_temp"},{default:G(()=>[...l[14]||(l[14]=[be("电解槽氢氧侧出槽温度",-1)])]),_:1}),W(y,{label:"oxygen_hydrogen_cross"},{default:G(()=>[...l[15]||(l[15]=[be("氧中氢/氢中氧",-1)])]),_:1})]),_:1},8,["modelValue"])])):qe("",!0)]),E("div",Ki,[E("div",Zi,[l[16]||(l[16]=E("div",{style:{"margin-bottom":"4px","font-size":"14px",color:"#606266"}},"设备名称 (Machine Name)",-1)),W(v,{modelValue:B.value,"onUpdate:modelValue":l[1]||(l[1]=a=>B.value=a),placeholder:"请选择设备名称",filterable:"",clearable:"",style:{width:"100%"},loading:se.value,onChange:Ct},{default:G(()=>[(ie(!0),Ee(et,null,tt(Xe.value,a=>(ie(),We(k,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),E("div",Qi,[l[17]||(l[17]=E("div",{style:{"margin-bottom":"4px","font-size":"14px",color:"#606266"}},"设备型号 (Machine Model)",-1)),W(v,{modelValue:le.value,"onUpdate:modelValue":l[2]||(l[2]=a=>le.value=a),placeholder:"请选择设备型号",filterable:"",clearable:"",style:{width:"100%"},loading:se.value,disabled:!B.value,onChange:Mt},{default:G(()=>[(ie(!0),Ee(et,null,tt(_t.value,a=>(ie(),We(k,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),Pe.value?(ie(),Ee("div",Ji,[E("div",null,[l[18]||(l[18]=E("div",{style:{"margin-bottom":"4px","font-size":"14px",color:"#606266"}},"Y轴最小值 (Y Min)",-1)),W(H,{modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=a=>w.value=a),step:Y.value,min:0,placeholder:"0",style:{width:"150px"},onChange:rt,precision:Oe.value},null,8,["modelValue","step","precision"])]),E("div",null,[l[19]||(l[19]=E("div",{style:{"margin-bottom":"4px","font-size":"14px",color:"#606266"}},"Y轴最大值 (Y Max)",-1)),W(H,{modelValue:P.value,"onUpdate:modelValue":l[4]||(l[4]=a=>P.value=a),step:Y.value,min:0,placeholder:"自适应",style:{width:"150px"},onChange:rt,precision:Oe.value},null,8,["modelValue","step","precision"])]),E("div",es,[W(x,{onClick:Tt,type:"primary"},{default:G(()=>[...l[20]||(l[20]=[be("自动适配",-1)])]),_:1})])])):qe("",!0)])]),_:1}),Pe.value?(ie(),We(n,{key:0},{header:G(()=>[E("div",ts,[E("div",is,bt(m.value==="voltage"?"小室电压":m.value==="voltage_range"?"小室极差":m.value==="voltage_avg"?"小室电压平均值":m.value==="pump_pressure"?"泵后压力":m.value==="specific_gravity"?"碱液比重":m.value==="hydrogen_flow_meter"?"氢气流量":m.value==="inlet_outlet_pressure"?"电解槽进出槽压力":m.value==="oxygen_hydrogen_outlet_pressure"?"电解槽氢氧侧出槽压力":m.value==="oxygen_hydrogen_outlet_temp"?"电解槽氢氧侧出槽温度":m.value==="oxygen_hydrogen_cross"?"氧中氢/氢中氧":"电解槽进出口压差"),1),ct.value?(ie(),Ee("div",ss,bt(ct.value),1)):qe("",!0)])]),footer:G(()=>[E("div",os," 渲染模式: Boost 高性能模式 | 设备: "+bt(it.value)+" | 数据点: "+bt(st.value),1)]),default:G(()=>[_e.value?(ie(),We(ri,{key:0})):qe("",!0),Di(E("div",{ref_key:"chartContainer",ref:oe,style:{width:"100%",height:"600px"}},null,512),[[Li,!_e.value]])]),_:1})):qe("",!0),!Pe.value&&_e.value?(ie(),We(n,{key:1},{header:G(()=>[...l[21]||(l[21]=[E("div",{style:{"font-size":"16px","font-weight":"500"}},"加载中...",-1)])]),default:G(()=>[W(ri)]),_:1})):qe("",!0),!Pe.value&&!_e.value?(ie(),We(p,{key:2,description:"请选择设备名称和型号","image-size":200})):qe("",!0)]),_:1})}}}),hs=li(rs,[["__scopeId","data-v-46504fb6"]]);export{hs as default};
