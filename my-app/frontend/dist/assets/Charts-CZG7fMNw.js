import{d as wi,r as xe,b as Ze,t as Ei,X as Si,I as Ye,o as be,J as S,al as ze,v as ri,a as P,R as D,L as We,O as oe,c as ut,a6 as oi,Q as ai,K as Ui,S as Ri,P as bt,az as zi}from"./vue-kqFMiSVm.js";import{H as Li,C as ni}from"./ChartSkeleton-DEPsD-ld.js";import{E as Qe}from"./element-plus-CcUPQmts.js";import{_ as Bi}from"./index-YAwsYAcE.js";import"./highcharts-DSb220Oi.js";var yt={exports:{}},Ii=yt.exports,li;function Di(){return li||(li=1,(function(It,Dt){(function(qe,we){It.exports=we(qe._Highcharts,qe._Highcharts.Color)})(typeof window>"u"?Ii:window,(qe,we)=>(()=>{let Le,K;var te,m={620:t=>{t.exports=we},944:t=>{t.exports=qe}},Ee={};function N(t){var e=Ee[t];if(e!==void 0)return e.exports;var i=Ee[t]={exports:{}};return m[t](i,i.exports,N),i.exports}N.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return N.d(e,{a:e}),e},N.d=(t,e)=>{for(var i in e)N.o(e,i)&&!N.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},N.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var ie={};N.d(ie,{default:()=>ki});var Je=N(944),y=N.n(Je);let Z=["area","areaspline","arearange","column","columnrange","bar","line","scatter","heatmap","bubble","treemap"],V={};Z.forEach(t=>{V[t]=!0});let{composed:ye}=y(),{addEvent:Ve,pick:Oe,pushUnique:vt}=y();function et(t){let e=t.series,i=t.boost=t.boost||{},s=t.options.boost||{},r=Oe(s.seriesThreshold,50);if(e.length>=r)return!0;if(e.length===1)return!1;let n=s.allowForce;if(n===void 0){for(let o of(n=!0,t.xAxis))if(Oe(o.min,-1/0)>Oe(o.dataMin,-1/0)||Oe(o.max,1/0)<Oe(o.dataMax,1/0)){n=!1;break}}if(i.forceChartBoost!==void 0){if(n)return i.forceChartBoost;i.forceChartBoost=void 0}let l=0,a=0,h;for(let o of e)(h=o.options).boostThreshold!==0&&o.visible!==!1&&o.type!=="heatmap"&&(V[o.type]&&++l,(function(...x){let d=-Number.MAX_VALUE;return x.forEach(E=>{if(E!=null&&E.length!==void 0&&E.length>0)return d=E.length,!0}),d})(o.getColumn("x",!0),h.data,o.points)>=(h.boostThreshold||Number.MAX_VALUE)&&++a);return i.forceChartBoost=n&&(l===e.length&&a===l||a>5),i.forceChartBoost}function ht(t){function e(){t.boost&&t.boost.wgl&&et(t)&&t.boost.wgl.render(t)}Ve(t,"predraw",function(){t.boost=t.boost||{},t.boost.forceChartBoost=void 0,t.boosted=!1,t.axes.some(r=>r.isPanning)||t.boost.clear?.(),t.boost.canvas&&t.boost.wgl&&et(t)&&t.boost.wgl.allocateBuffer(t),t.boost.markerGroup&&t.xAxis&&t.xAxis.length>0&&t.yAxis&&t.yAxis.length>0&&t.boost.markerGroup.translate(t.xAxis[0].pos,t.yAxis[0].pos)}),Ve(t,"load",e,{order:-1}),Ve(t,"redraw",e);let i=-1,s=-1;Ve(t.pointer,"afterGetHoverData",r=>{let n=r.hoverPoint?.series;if(t.boost=t.boost||{},t.boost.markerGroup&&n){let l=t.inverted?n.yAxis:n.xAxis,a=t.inverted?n.xAxis:n.yAxis;(l&&l.pos!==i||a&&a.pos!==s)&&(t.series.forEach(h=>{h.halo?.hide()}),t.boost.markerGroup.translate(l.pos,a.pos),i=l.pos,s=a.pos)}})}let tt={compose:function(t,e){return e&&vt(ye,"Boost.Chart")&&t.prototype.callbacks.push(ht),t},getBoostClipRect:function(t,e){let i=t.navigator,s={x:t.plotLeft,y:t.plotTop,width:t.plotWidth,height:t.plotHeight};if(i&&t.inverted?(s.width+=i.top+i.height,i.opposite||(s.x=i.left)):i&&!t.inverted&&(s.height=i.top+i.height-t.plotTop),e.is){let{xAxis:r,yAxis:n}=e;if(s=t.getClipBox(e),t.inverted){let l=s.width;s.width=s.height,s.height=l,s.x=n.pos,s.y=r.pos}else s.x=r.pos,s.y=n.pos}if(e===t){let r=t.inverted?t.xAxis:t.yAxis;r.length<=1&&(s.y=Math.min(r[0].pos,s.y),s.height=r[0].pos-t.plotTop+r[0].len)}return s},isChartSeriesBoosting:et};var At=N(620),it=N.n(At);let _t={area:"LINES",arearange:"LINES",areaspline:"LINES",column:"LINES",columnrange:"LINES",bar:"LINES",line:"LINE_STRIP",scatter:"POINTS",heatmap:"TRIANGLES",treemap:"TRIANGLES",bubble:"POINTS"},{clamp:Pt,error:Ct,pick:st}=y(),Tt=class{constructor(t){this.errors=[],this.uLocations={},this.gl=t,t&&this.createShader()}bind(){this.gl&&this.shaderProgram&&this.gl.useProgram(this.shaderProgram)}createShader(){let t=this.stringToProgram(`#version 100
#define LN10 2.302585092994046
precision highp float;
attribute vec4 aVertexPosition;
attribute vec4 aColor;
varying highp vec2 position;
varying highp vec4 vColor;
uniform mat4 uPMatrix;
uniform float pSize;
uniform float translatedThreshold;
uniform bool hasThreshold;
uniform bool skipTranslation;
uniform float xAxisTrans;
uniform float xAxisMin;
uniform float xAxisMax;
uniform float xAxisMinPad;
uniform float xAxisPointRange;
uniform float xAxisLen;
uniform bool  xAxisPostTranslate;
uniform float xAxisOrdinalSlope;
uniform float xAxisOrdinalOffset;
uniform float xAxisPos;
uniform bool  xAxisCVSCoord;
uniform bool  xAxisIsLog;
uniform bool  xAxisReversed;
uniform float yAxisTrans;
uniform float yAxisMin;
uniform float yAxisMax;
uniform float yAxisMinPad;
uniform float yAxisPointRange;
uniform float yAxisLen;
uniform bool  yAxisPostTranslate;
uniform float yAxisOrdinalSlope;
uniform float yAxisOrdinalOffset;
uniform float yAxisPos;
uniform bool  yAxisCVSCoord;
uniform bool  yAxisIsLog;
uniform bool  yAxisReversed;
uniform bool  isCircle;
uniform bool  isBubble;
uniform bool  bubbleSizeByArea;
uniform float bubbleZMin;
uniform float bubbleZMax;
uniform float bubbleZThreshold;
uniform float bubbleMinSize;
uniform float bubbleMaxSize;
uniform bool  bubbleSizeAbs;
uniform bool  isInverted;
float bubbleRadius(){
float value = aVertexPosition.w;
float zMax = bubbleZMax;
float zMin = bubbleZMin;
float radius = 0.0;
float pos = 0.0;
float zRange = zMax - zMin;
if (bubbleSizeAbs){
value = value - bubbleZThreshold;
zMax = max(zMax - bubbleZThreshold, zMin - bubbleZThreshold);
zMin = 0.0;
}
if (value < zMin){
radius = bubbleZMin / 2.0 - 1.0;
} else {
pos = zRange > 0.0 ? (value - zMin) / zRange : 0.5;
if (bubbleSizeByArea && pos > 0.0){
pos = sqrt(pos);
}
radius = ceil(bubbleMinSize + pos * (bubbleMaxSize - bubbleMinSize)) / 2.0;
}
return radius * 2.0;
}
float translate(float val,
float pointPlacement,
float localA,
float localMin,
float minPixelPadding,
float pointRange,
float len,
bool  cvsCoord,
bool  isLog,
bool  reversed
){
float sign = 1.0;
float cvsOffset = 0.0;
if (cvsCoord) {
sign *= -1.0;
cvsOffset = len;
}
if (isLog) {
val = log(val) / LN10;
}
if (reversed) {
sign *= -1.0;
cvsOffset -= sign * len;
}
return sign * (val - localMin) * localA + cvsOffset + 
(sign * minPixelPadding);
}
float xToPixels(float value) {
if (skipTranslation){
return value;// + xAxisPos;
}
return translate(value, 0.0, xAxisTrans, xAxisMin, xAxisMinPad, xAxisPointRange, xAxisLen, xAxisCVSCoord, xAxisIsLog, xAxisReversed);// + xAxisPos;
}
float yToPixels(float value, float checkTreshold) {
float v;
if (skipTranslation){
v = value;// + yAxisPos;
} else {
v = translate(value, 0.0, yAxisTrans, yAxisMin, yAxisMinPad, yAxisPointRange, yAxisLen, yAxisCVSCoord, yAxisIsLog, yAxisReversed);// + yAxisPos;
if (v > yAxisLen) {
v = yAxisLen;
}
}
if (checkTreshold > 0.0 && hasThreshold) {
v = min(v, translatedThreshold);
}
return v;
}
void main(void) {
if (isBubble){
gl_PointSize = bubbleRadius();
} else {
gl_PointSize = pSize;
}
vColor = aColor;
if (!skipTranslation && isCircle && (
aVertexPosition.x < xAxisMin ||
aVertexPosition.x > xAxisMax ||
aVertexPosition.y < yAxisMin ||
aVertexPosition.y > yAxisMax
)) {
gl_Position = uPMatrix * vec4(2.0, 2.0, 2.0, 1.0);
} else if (skipTranslation && isInverted) {
gl_Position = uPMatrix * vec4(aVertexPosition.y + yAxisPos, aVertexPosition.x + xAxisPos, 0.0, 1.0);
} else if (isInverted) {
gl_Position = uPMatrix * vec4(yToPixels(aVertexPosition.y, aVertexPosition.z) + yAxisPos, xToPixels(aVertexPosition.x) + xAxisPos, 0.0, 1.0);
} else {
gl_Position = uPMatrix * vec4(xToPixels(aVertexPosition.x) + xAxisPos, yToPixels(aVertexPosition.y, aVertexPosition.z) + yAxisPos, 0.0, 1.0);
}
}`,"vertex"),e=this.stringToProgram(`precision highp float;
uniform vec4 fillColor;
varying highp vec2 position;
varying highp vec4 vColor;
uniform sampler2D uSampler;
uniform bool isCircle;
uniform bool hasColor;
void main(void) {
vec4 col = fillColor;
vec4 tcol = texture2D(uSampler, gl_PointCoord.st);
if (hasColor) {
col = vColor;
}
if (isCircle) {
col *= tcol;
if (tcol.r < 0.0) {
discard;
} else {
gl_FragColor = col;
}
} else {
gl_FragColor = col;
}
}`,"fragment"),i=s=>this.gl.getUniformLocation(this.shaderProgram,s);return t&&e?(this.shaderProgram=this.gl.createProgram(),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.gl.getProgramParameter(this.shaderProgram,this.gl.LINK_STATUS)?(this.gl.useProgram(this.shaderProgram),this.gl.bindAttribLocation(this.shaderProgram,0,"aVertexPosition"),this.pUniform=i("uPMatrix"),this.psUniform=i("pSize"),this.fcUniform=i("fillColor"),this.isBubbleUniform=i("isBubble"),this.bubbleSizeAbsUniform=i("bubbleSizeAbs"),this.bubbleSizeAreaUniform=i("bubbleSizeByArea"),this.uSamplerUniform=i("uSampler"),this.skipTranslationUniform=i("skipTranslation"),this.isCircleUniform=i("isCircle"),this.isInverted=i("isInverted"),!0):(this.errors.push(this.gl.getProgramInfoLog(this.shaderProgram)),this.handleErrors(),this.shaderProgram=!1,!1)):(this.shaderProgram=!1,this.handleErrors(),!1)}handleErrors(){this.errors.length&&Ct("[highcharts boost] shader error - "+this.errors.join(`
`))}stringToProgram(t,e){let i=this.gl.createShader(e==="vertex"?this.gl.VERTEX_SHADER:this.gl.FRAGMENT_SHADER);return this.gl.shaderSource(i,t),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(this.errors.push("when compiling "+e+` shader:
`+this.gl.getShaderInfoLog(i)),!1)}destroy(){this.gl&&this.shaderProgram&&(this.gl.deleteProgram(this.shaderProgram),this.shaderProgram=!1)}fillColorUniform(){return this.fcUniform}getProgram(){return this.shaderProgram}pointSizeUniform(){return this.psUniform}perspectiveUniform(){return this.pUniform}reset(){this.gl&&this.shaderProgram&&(this.gl.uniform1i(this.isBubbleUniform,0),this.gl.uniform1i(this.isCircleUniform,0))}setBubbleUniforms(t,e,i,s=1){let r=t.options,n=Number.MAX_VALUE,l=-Number.MAX_VALUE;if(this.gl&&this.shaderProgram&&t.is("bubble")){let a=t.getPxExtremes();n=st(r.zMin,Pt(e,r.displayNegative===!1?r.zThreshold:-Number.MAX_VALUE,n)),l=st(r.zMax,Math.max(l,i)),this.gl.uniform1i(this.isBubbleUniform,1),this.gl.uniform1i(this.isCircleUniform,1),this.gl.uniform1i(this.bubbleSizeAreaUniform,t.options.sizeBy!=="width"),this.gl.uniform1i(this.bubbleSizeAbsUniform,t.options.sizeByAbsoluteValue),this.setUniform("bubbleMinSize",a.minPxSize*s),this.setUniform("bubbleMaxSize",a.maxPxSize*s),this.setUniform("bubbleZMin",n),this.setUniform("bubbleZMax",l),this.setUniform("bubbleZThreshold",t.options.zThreshold)}}setColor(t){this.gl&&this.shaderProgram&&this.gl.uniform4f(this.fcUniform,t[0]/255,t[1]/255,t[2]/255,t[3])}setDrawAsCircle(t){this.gl&&this.shaderProgram&&this.gl.uniform1i(this.isCircleUniform,+!!t)}setInverted(t){this.gl&&this.shaderProgram&&this.gl.uniform1i(this.isInverted,t)}setPMatrix(t){this.gl&&this.shaderProgram&&this.gl.uniformMatrix4fv(this.pUniform,!1,t)}setPointSize(t){this.gl&&this.shaderProgram&&this.gl.uniform1f(this.psUniform,t)}setSkipTranslation(t){this.gl&&this.shaderProgram&&this.gl.uniform1i(this.skipTranslationUniform,+(t===!0))}setTexture(t){this.gl&&this.shaderProgram&&this.gl.uniform1i(this.uSamplerUniform,t)}setUniform(t,e){if(this.gl&&this.shaderProgram){let i=this.uLocations[t]=this.uLocations[t]||this.gl.getUniformLocation(this.shaderProgram,t);this.gl.uniform1f(i,e)}}},rt=class{constructor(t,e,i){this.buffer=!1,this.iterator=0,this.preAllocated=!1,this.vertAttribute=!1,this.components=i||2,this.dataComponents=i,this.gl=t,this.shader=e}allocate(t){this.iterator=-1,this.preAllocated=new Float32Array(4*t)}bind(){if(!this.buffer)return!1;this.gl.vertexAttribPointer(this.vertAttribute,this.components,this.gl.FLOAT,!1,0,0)}build(t,e,i){let s;return this.data=t||[],this.data&&this.data.length!==0||this.preAllocated?(this.components=i||this.components,this.buffer&&this.gl.deleteBuffer(this.buffer),this.preAllocated||(s=new Float32Array(this.data)),this.buffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.preAllocated||s,this.gl.STATIC_DRAW),this.vertAttribute=this.gl.getAttribLocation(this.shader.getProgram(),e),this.gl.enableVertexAttribArray(this.vertAttribute),s=!1,!0):(this.destroy(),!1)}destroy(){this.buffer&&(this.gl.deleteBuffer(this.buffer),this.buffer=!1,this.vertAttribute=!1),this.iterator=0,this.components=this.dataComponents||2,this.data=[]}push(t,e,i,s){this.preAllocated&&(this.preAllocated[++this.iterator]=t,this.preAllocated[++this.iterator]=e,this.preAllocated[++this.iterator]=i,this.preAllocated[++this.iterator]=s)}render(t,e,i){let s=this.preAllocated?this.preAllocated.length:this.data.length;return!!this.buffer&&!!s&&((!t||t>s||t<0)&&(t=0),(!e||e>s)&&(e=s),!(t>=e)&&(i=i||"POINTS",this.gl.drawArrays(this.gl[i],t/this.components,(e-t)/this.components),!0))}},{getBoostClipRect:dt}=tt,{parse:f}=it(),{doc:u,win:b}=y(),{isNumber:v,isObject:p,merge:q,objectEach:Q,pick:ae}=y(),de={column:!0,columnrange:!0,bar:!0,area:!0,areaspline:!0,arearange:!0},ve={scatter:!0,bubble:!0},U=["webgl","experimental-webgl","moz-webgl","webkit-3d"];class c{static orthoMatrix(e,i){return[2/e,0,0,0,0,-(2/i),0,0,0,0,-2,0,-1,1,-1,1]}static seriesPointCount(e){let i,s,r;return e.boosted?(i=!!e.options.stacking,s=(e.getColumn("x").length?e.getColumn("x"):void 0)||e.options.xData||e.getColumn("x",!0),r=(i?e.data:s||e.options.data).length,e.type==="treemap"?r*=12:e.type==="heatmap"?r*=6:de[e.type]&&(r*=2),r):0}constructor(e){this.data=[],this.height=0,this.isInited=!1,this.markerData=[],this.series=[],this.textureHandles={},this.width=0,this.postRenderCallback=e,this.settings={pointSize:1,lineWidth:1,fillColor:"#AA00AA",useAlpha:!0,usePreallocated:!1,useGPUTranslations:!1,debug:{timeRendering:!1,timeSeriesProcessing:!1,timeSetup:!1,timeBufferCopy:!1,timeKDTree:!1,showSkipSummary:!1}}}getPixelRatio(){return this.settings.pixelRatio||b.devicePixelRatio||1}setOptions(e){"pixelRatio"in e||(e.pixelRatio=1),q(!0,this.settings,e)}allocateBuffer(e){let i=this.vbuffer,s=0;this.settings.usePreallocated&&(e.series.forEach(r=>{r.boosted&&(s+=c.seriesPointCount(r))}),i&&i.allocate(s))}allocateBufferForSingleSeries(e){let i=this.vbuffer,s=0;this.settings.usePreallocated&&(e.boosted&&(s=c.seriesPointCount(e)),i&&i.allocate(s))}clear(){let e=this.gl;e&&e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}pushSeriesData(e,i){let s=this.data,r=this.settings,n=this.vbuffer,l=e.pointArrayMap&&e.pointArrayMap.join(",")==="low,high",{chart:a,options:h,sorted:o,xAxis:x,yAxis:d}=e,E=!!h.stacking,z=h.data,G=e.xAxis.getExtremes(),X=G.min-(e.xAxis.minPointOffset||0),H=G.max+(e.xAxis.minPointOffset||0),ne=e.yAxis.getExtremes(),le=ne.min-(e.yAxis.minPointOffset||0),j=ne.max+(e.yAxis.minPointOffset||0),ce=(e.getColumn("x").length?e.getColumn("x"):void 0)||h.xData||e.getColumn("x",!0),F=(e.getColumn("y").length?e.getColumn("y"):void 0)||h.yData||e.getColumn("y",!0),Y=(e.getColumn("z").length?e.getColumn("z"):void 0)||h.zData||e.getColumn("z",!0),ue=!ce||ce.length===0,he=e.options.colorByPoint,me=h.connectNulls,J=e.points||!1,O=E?e.data:ce||z,Ce={x:Number.MAX_VALUE,y:0},Ge={x:-Number.MAX_VALUE,y:0},nt=a.index===void 0,Xe=de[e.type],lt=h.zoneAxis||"y",Se=h.zones||!1,$e=h.threshold,Ue=this.getPixelRatio(),Re=e.chart.plotWidth,Te=!1,He=!1,Me,Ie,R=0,se=!1,T,M,k,re,w=-1,ge=!1,pe=!1,De,Et=!1,St=!1,$,Ut=!1,Rt=!0,ti=!0,Ke,Ne=!1,zt=!1,ct=0,Lt=0;if(h.boostData&&h.boostData.length>0)return;h.gapSize&&(zt=h.gapUnit!=="value"?h.gapSize*e.closestPointRange:h.gapSize),Se&&(Ke=[],Se.forEach((g,_)=>{if(g.color){let I=f(g.color).rgba;I[0]/=255,I[1]/=255,I[2]/=255,Ke[_]=I,Ne||g.value!==void 0||(Ne=I)}}),Ne||(Ne=f(e.pointAttribs&&e.pointAttribs().fill||e.color).rgba,Ne[0]/=255,Ne[1]/=255,Ne[2]/=255)),a.inverted&&(Re=e.chart.plotHeight),e.closestPointRangePx=Number.MAX_VALUE;let je=g=>{g&&(i.colorData.push(g[0]),i.colorData.push(g[1]),i.colorData.push(g[2]),i.colorData.push(g[3]))},ke=(g,_,I,ee=1,W)=>{je(W),Ue!==1&&(!r.useGPUTranslations||i.skipTranslation)&&(g*=Ue,_*=Ue,ee*=Ue),r.usePreallocated&&n?(n.push(g,_,+!!I,ee),ct+=4):(s.push(g),s.push(_),s.push(I?Ue:0),s.push(ee))},Bt=()=>{i.segments.length&&(i.segments[i.segments.length-1].to=s.length||ct)},mt=()=>{i.segments.length&&i.segments[i.segments.length-1].from===(s.length||ct)||(Bt(),i.segments.push({from:s.length||ct}))},ii=(g,_,I,ee,W)=>{je(W),ke(g+I,_),je(W),ke(g,_),je(W),ke(g,_+ee),je(W),ke(g,_+ee),je(W),ke(g+I,_+ee),je(W),ke(g+I,_)};if(mt(),J&&J.length>0){i.skipTranslation=!0,i.drawMode="TRIANGLES",J[0].node&&J[0].node.levelDynamic&&J.sort((g,_)=>{if(g.node){if(g.node.levelDynamic>_.node.levelDynamic)return 1;if(g.node.levelDynamic<_.node.levelDynamic)return-1}return 0}),J.forEach(g=>{let _,I,ee=g.plotY;if(ee!==void 0&&!isNaN(ee)&&g.y!==null&&g.shapeArgs){let{x:W=0,y:gt=0,width:pt=0,height:xt=0}=g.shapeArgs;_=(I=a.styledMode?g.series.colorAttribs(g):I=g.series.pointAttribs(g))["stroke-width"]||0,$=f(I.fill).rgba,$[0]/=255,$[1]/=255,$[2]/=255,e.is("treemap")&&(_=_||1,Ie=f(I.stroke).rgba,Ie[0]/=255,Ie[1]/=255,Ie[2]/=255,ii(W,gt,pt,xt,Ie),_/=2),e.is("heatmap")&&a.inverted&&(W=x.len-W,gt=d.len-gt,pt=-pt,xt=-xt),ii(W+_,gt+_,pt-2*_,xt-2*_,$)}}),Bt();return}for(;w<O.length-1;){if((k=O[++w])===void 0)continue;if(nt)break;let g=z&&z[w];if(!ue){p(g,!0)&&g.color&&($=f(g.color).rgba);let _=e.options.keys?.indexOf("color");Array.isArray(g)&&_&&typeof g[_]=="string"?$=f(g[_]).rgba:he&&a.options.colors&&(Lt%=a.options.colors.length,$=f(a.options.colors[Lt]).rgba),$&&($[0]/=255,$[1]/=255,$[2]/=255),Lt++}if(ue?(T=k[0],M=k[1],O[w+1]&&(pe=O[w+1][0]),O[w-1]&&(ge=O[w-1][0]),k.length>=3&&(re=k[2],k[2]>i.zMax&&(i.zMax=k[2]),k[2]<i.zMin&&(i.zMin=k[2]))):(T=k,M=F?.[w],O[w+1]&&(pe=O[w+1]),O[w-1]&&(ge=O[w-1]),Y&&Y.length&&(re=Y[w],Y[w]>i.zMax&&(i.zMax=Y[w]),Y[w]<i.zMin&&(i.zMin=Y[w]))),!me&&(T===null||M===null)){mt();continue}if(pe&&pe>=X&&pe<=H&&(Et=!0),ge&&ge>=X&&ge<=H&&(St=!0),l?(ue&&(M=k.slice(1,3)),De=e.getColumn("low",!0)?.[w],M=e.getColumn("high",!0)?.[w]||0):E&&(T=k.x,De=(M=k.stackY)-k.y),le!=null&&j!=null&&(Rt=M>=le&&M<=j),!(!o&&!Rt||(T>H&&Ge.x<H&&(Ge.x=T,Ge.y=M),T<X&&Ce.x>X&&(Ce.x=T,Ce.y=M),M===null&&me))){if(M===null||!Rt&&O.length>1&&!Et&&!St){mt();continue}if((o&&(pe>=X||T>=X)&&(ge<=H||T<=H)||!o&&T>=X&&T<=H)&&(Ut=!0),Ut||Et||St){if(zt&&T-ge>zt&&mt(),Se){let _;Se.some((I,ee)=>{let W=Se[ee-1];return lt==="x"?I.value!==void 0&&T<=I.value&&(Ke[ee]&&(!W||T>=W.value)&&(_=Ke[ee]),!0):I.value!==void 0&&M<=I.value&&(Ke[ee]&&(!W||M>=W.value)&&(_=Ke[ee]),!0)}),$=_||Ne||$}if(r.useGPUTranslations||(i.skipTranslation=!0,T=x.toPixels(T,!0),M=d.toPixels(M,!0),!(T>Re)||i.drawMode!=="POINTS")){if(i.hasMarkers&&Ut&&Te!==!1&&(e.closestPointRangePx=Math.min(e.closestPointRangePx,Math.abs(T-Te))),!r.useGPUTranslations&&!r.usePreallocated&&Te&&1>Math.abs(T-Te)&&He&&1>Math.abs(M-He)){r.debug.showSkipSummary&&++R;continue}Xe&&(Me=De||0,(De===!1||De===void 0)&&(Me=M<0?M:0),(l||E)&&!d.logarithmic||(Me=Math.max($e===null?le:$e,le)),r.useGPUTranslations||(Me=d.toPixels(Me,!0)),ke(T,Me,!1,0,$)),h.step&&!ti&&ke(T,He,!1,2,$),ke(T,M,!1,e.type==="bubble"?re||1:2,$),Te=T,He=M,se=!0,ti=!1}}}}r.debug.showSkipSummary&&console.log("skipped points:",R);let si=(g,_)=>{if(r.useGPUTranslations||(i.skipTranslation=!0,g.x=x.toPixels(g.x,!0),g.y=d.toPixels(g.y,!0)),_){this.data=[g.x,g.y,0,2].concat(this.data);return}ke(g.x,g.y,0,2)};!se&&me!==!1&&e.drawMode==="line_strip"&&(Ce.x<Number.MAX_VALUE&&si(Ce,!0),Ge.x>-Number.MAX_VALUE&&si(Ge)),Bt()}pushSeries(e){let i=this.markerData,s=this.series,r=this.settings;s.length>0&&s[s.length-1].hasMarkers&&(s[s.length-1].markerTo=i.length),r.debug.timeSeriesProcessing&&console.time("building "+e.type+" series");let n={segments:[],markerFrom:i.length,colorData:[],series:e,zMin:Number.MAX_VALUE,zMax:-Number.MAX_VALUE,hasMarkers:!!e.options.marker&&e.options.marker.enabled!==!1,showMarkers:!0,drawMode:_t[e.type]||"LINE_STRIP"};e.index>=s.length?s.push(n):s[e.index]=n,this.pushSeriesData(e,n),r.debug.timeSeriesProcessing&&console.timeEnd("building "+e.type+" series")}flush(){let e=this.vbuffer;this.data=[],this.markerData=[],this.series=[],e&&e.destroy()}setXAxis(e){let i=this.shader;if(!i)return;let s=this.getPixelRatio();i.setUniform("xAxisTrans",e.transA*s),i.setUniform("xAxisMin",e.min),i.setUniform("xAxisMax",e.max),i.setUniform("xAxisMinPad",e.minPixelPadding*s),i.setUniform("xAxisPointRange",e.pointRange),i.setUniform("xAxisLen",e.len*s),i.setUniform("xAxisPos",e.pos*s),i.setUniform("xAxisCVSCoord",!e.horiz),i.setUniform("xAxisIsLog",!!e.logarithmic),i.setUniform("xAxisReversed",!!e.reversed)}setYAxis(e){let i=this.shader;if(!i)return;let s=this.getPixelRatio();i.setUniform("yAxisTrans",e.transA*s),i.setUniform("yAxisMin",e.min),i.setUniform("yAxisMax",e.max),i.setUniform("yAxisMinPad",e.minPixelPadding*s),i.setUniform("yAxisPointRange",e.pointRange),i.setUniform("yAxisLen",e.len*s),i.setUniform("yAxisPos",e.pos*s),i.setUniform("yAxisCVSCoord",!e.horiz),i.setUniform("yAxisIsLog",!!e.logarithmic),i.setUniform("yAxisReversed",!!e.reversed)}setThreshold(e,i){let s=this.shader;s&&(s.setUniform("hasThreshold",e),s.setUniform("translatedThreshold",i))}renderChart(e){let i=this.gl,s=this.settings,r=this.shader,n=this.vbuffer,l=this.getPixelRatio();if(!e)return!1;this.width=e.chartWidth*l,this.height=e.chartHeight*l;let a=this.height,h=this.width;if(!i||!r||!h||!a)return!1;s.debug.timeRendering&&console.time("gl rendering"),i.canvas.width=h,i.canvas.height=a,r.bind(),i.viewport(0,0,h,a),r.setPMatrix(c.orthoMatrix(h,a)),s.lineWidth>1&&!y().isMS&&i.lineWidth(s.lineWidth),n&&(n.build(this.data,"aVertexPosition",4),n.bind()),r.setInverted(e.inverted),this.series.forEach((o,x)=>{let d=o.series.options,E=d.marker,z=d.lineWidth!==void 0?d.lineWidth:1,G=d.threshold,X=v(G),H=o.series.yAxis.getThreshold(G),ne=ae(d.marker?d.marker.enabled:null,!!o.series.xAxis.isRadial||null,o.series.closestPointRangePx>2*((d.marker?d.marker.radius:10)||10)),le=this.textureHandles[E&&E.symbol||o.series.symbol]||this.textureHandles.circle,j,ce,F,Y=[];if(o.segments.length!==0&&o.segments[0].from!==o.segments[0].to&&(le.isReady&&(i.bindTexture(i.TEXTURE_2D,le.handle),r.setTexture(le.handle)),e.styledMode?o.series.markerGroup===o.series.chart.boost?.markerGroup?(delete o.series.markerGroup,o.series.markerGroup=o.series.plotGroup("markerGroup","markers","visible",1,e.seriesGroup).addClass("highcharts-tracker"),F=o.series.markerGroup.getStyle("fill"),o.series.markerGroup.destroy(),o.series.markerGroup=o.series.chart.boost?.markerGroup):F=o.series.markerGroup?.getStyle("fill"):(F=o.drawMode==="POINTS"&&o.series.pointAttribs&&o.series.pointAttribs().fill||o.series.color,d.colorByPoint&&(F=o.series.chart.options.colors[x])),o.series.fillOpacity&&d.fillOpacity&&(F=new(it())(F).setOpacity(ae(d.fillOpacity,1)).get()),Y=f(F).rgba,s.useAlpha||(Y[3]=1),d.boostBlending==="add"?(i.blendFunc(i.SRC_ALPHA,i.ONE),i.blendEquation(i.FUNC_ADD)):d.boostBlending==="mult"||d.boostBlending==="multiply"?i.blendFunc(i.DST_COLOR,i.ZERO):d.boostBlending==="darken"?(i.blendFunc(i.ONE,i.ONE),i.blendEquation(i.FUNC_MIN)):i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA),r.reset(),o.colorData.length>0?(r.setUniform("hasColor",1),(ce=new rt(i,r)).build(Array(o.segments[0].from).concat(o.colorData),"aColor",4),ce.bind()):(r.setUniform("hasColor",0),i.disableVertexAttribArray(i.getAttribLocation(r.getProgram(),"aColor"))),r.setColor(Y),this.setXAxis(o.series.xAxis),this.setYAxis(o.series.yAxis),this.setThreshold(X,H),o.drawMode==="POINTS"&&r.setPointSize(2*ae(d.marker&&d.marker.radius,.5)*l),r.setSkipTranslation(o.skipTranslation),o.series.type==="bubble"&&r.setBubbleUniforms(o.series,o.zMin,o.zMax,l),r.setDrawAsCircle(ve[o.series.type]||!1),n)){if(z>0||o.drawMode!=="LINE_STRIP"){let{x:ue,y:he,width:me,height:J}=dt(e,o.series);for(i.enable(i.SCISSOR_TEST),i.scissor(ue,a-he-J,me,J),j=0;j<o.segments.length;j++)n.render(o.segments[j].from,o.segments[j].to,o.drawMode);i.disable(i.SCISSOR_TEST)}if(o.hasMarkers&&ne)for(r.setPointSize(2*ae(d.marker&&d.marker.radius,5)*l),r.setDrawAsCircle(!0),j=0;j<o.segments.length;j++)n.render(o.segments[j].from,o.segments[j].to,"POINTS")}}),s.debug.timeRendering&&console.timeEnd("gl rendering"),this.postRenderCallback&&this.postRenderCallback(this),this.flush()}render(e){if(this.clear(),e.renderer.forExport)return this.renderChart(e);this.isInited?this.renderChart(e):setTimeout(()=>{this.render(e)},1)}setSize(e,i){let s=this.shader;s&&(this.width!==e||this.height!==i)&&(this.width=e,this.height=i,s.bind(),s.setPMatrix(c.orthoMatrix(e,i)))}init(e,i){let s=this.settings;if(this.isInited=!1,!e)return!1;s.debug.timeSetup&&console.time("gl setup");for(let a=0;a<U.length&&(this.gl=e.getContext(U[a],{}),!this.gl);++a);let r=this.gl;if(!r)return!1;i||this.flush(),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.disable(r.DEPTH_TEST),r.depthFunc(r.LESS);let n=this.shader=new Tt(r);if(!n)return!1;this.vbuffer=new rt(r,n);let l=(a,h)=>{let o={isReady:!1,texture:u.createElement("canvas"),handle:r.createTexture()},x=o.texture.getContext("2d");this.textureHandles[a]=o,o.texture.width=512,o.texture.height=512,x.mozImageSmoothingEnabled=!1,x.webkitImageSmoothingEnabled=!1,x.msImageSmoothingEnabled=!1,x.imageSmoothingEnabled=!1,x.strokeStyle="rgba(255, 255, 255, 0)",x.fillStyle="#FFF",h(x);try{r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.handle),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,o.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.bindTexture(r.TEXTURE_2D,null),o.isReady=!0}catch{}};return l("circle",a=>{a.beginPath(),a.arc(256,256,256,0,2*Math.PI),a.stroke(),a.fill()}),l("square",a=>{a.fillRect(0,0,512,512)}),l("diamond",a=>{a.beginPath(),a.moveTo(256,0),a.lineTo(512,256),a.lineTo(256,512),a.lineTo(0,256),a.lineTo(256,0),a.fill()}),l("triangle",a=>{a.beginPath(),a.moveTo(0,512),a.lineTo(256,0),a.lineTo(512,512),a.lineTo(0,512),a.fill()}),l("triangle-down",a=>{a.beginPath(),a.moveTo(0,0),a.lineTo(256,512),a.lineTo(512,0),a.lineTo(0,0),a.fill()}),this.isInited=!0,s.debug.timeSetup&&console.timeEnd("gl setup"),!0}destroy(){let e=this.gl,i=this.shader,s=this.vbuffer;this.flush(),s&&s.destroy(),i&&i.destroy(),e&&(Q(this.textureHandles,r=>{r.handle&&e.deleteTexture(r.handle)}),e.canvas.width=1,e.canvas.height=1)}}(function(t){t.setLength=function(e,i,s){return Array.isArray(e)?(e.length=i,e):e[s?"subarray":"slice"](0,i)},t.splice=function(e,i,s,r,n=[]){if(Array.isArray(e))return Array.isArray(n)||(n=Array.from(n)),{removed:e.splice(i,s,...n),array:e};let l=Object.getPrototypeOf(e).constructor,a=e[r?"subarray":"slice"](i,i+s),h=new l(e.length-s+n.length);return h.set(e.subarray(0,i),0),h.set(n,i),h.set(e.subarray(i+s),i+n.length),{removed:a,array:h}}})(te||(te={}));let{setLength:L,splice:A}=te,{fireEvent:C,objectEach:B,uniqueKey:Pe}=y(),fe=class{constructor(t={}){this.autoId=!t.id,this.columns={},this.id=t.id||Pe(),this.modified=this,this.rowCount=0,this.versionTag=Pe();let e=0;B(t.columns||{},(i,s)=>{this.columns[s]=i.slice(),e=Math.max(e,i.length)}),this.applyRowCount(e)}applyRowCount(t){this.rowCount=t,B(this.columns,(e,i)=>{e.length!==t&&(this.columns[i]=L(e,t))})}deleteRows(t,e=1){if(e>0&&t<this.rowCount){let i=0;B(this.columns,(s,r)=>{this.columns[r]=A(s,t,e).array,i=s.length}),this.rowCount=i}C(this,"afterDeleteRows",{rowIndex:t,rowCount:e}),this.versionTag=Pe()}getColumn(t,e){return this.columns[t]}getColumns(t,e){return(t||Object.keys(this.columns)).reduce((i,s)=>(i[s]=this.columns[s],i),{})}getRow(t,e){return(e||Object.keys(this.columns)).map(i=>this.columns[i]?.[t])}setColumn(t,e=[],i=0,s){this.setColumns({[t]:e},i,s)}setColumns(t,e,i){let s=this.rowCount;B(t,(r,n)=>{this.columns[n]=r.slice(),s=r.length}),this.applyRowCount(s),i?.silent||(C(this,"afterSetColumns"),this.versionTag=Pe())}setRow(t,e=this.rowCount,i,s){let{columns:r}=this,n=i?this.rowCount+1:e+1;B(t,(l,a)=>{let h=r[a]||s?.addColumns!==!1&&Array(n);h&&(i?h=A(h,e,0,!0,[l]).array:h[e]=l,r[a]=h)}),n>this.rowCount&&this.applyRowCount(n),s?.silent||(C(this,"afterSetRows"),this.versionTag=Pe())}},{getBoostClipRect:Mt,isChartSeriesBoosting:Ae}=tt,{getOptions:ft}=y(),{composed:ui,doc:Nt,noop:Vt,win:Ot}=y(),{addEvent:Ft,destroyObjectProperties:hi,error:Gt,extend:kt,fireEvent:Xt,isArray:Ht,isNumber:_e,pick:ot,pushUnique:di,wrap:Be,defined:fi}=y();function jt(t,e){let i=e.boost;t&&i&&i.target&&i.canvas&&!Ae(e.chart)&&t.allocateBufferForSingleSeries(e)}function Yt(t){return ot(t&&t.options&&t.options.boost&&t.options.boost.enabled,!0)}function Wt(t,e){let i=t.constructor,s=t.seriesGroup||e.group,r=t.chartWidth,n=t.chartHeight,l=t,a=typeof SVGForeignObjectElement<"u",h=!1;Ae(t)?l=t:(l=e,h=!!(e.options.events?.click||e.options.point?.events?.click));let o=l.boost=l.boost||{};if(a=!1,K||(K=Nt.createElement("canvas")),!o.target&&(o.canvas=K,t.renderer.forExport||!a?(l.renderTarget=o.target=t.renderer.image("",0,0,r,n).addClass("highcharts-boost-canvas").add(s),o.clear=function(){o.target.attr({href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="})},o.copy=function(){o.resize(),o.target.attr({href:o.canvas.toDataURL("image/png")})}):(o.targetFo=t.renderer.createElement("foreignObject").add(s),l.renderTarget=o.target=Nt.createElement("canvas"),o.targetCtx=o.target.getContext("2d"),o.targetFo.element.appendChild(o.target),o.clear=function(){o.target.width=o.canvas.width,o.target.height=o.canvas.height},o.copy=function(){o.target.width=o.canvas.width,o.target.height=o.canvas.height,o.targetCtx.drawImage(o.canvas,0,0)}),o.resize=function(){r=t.chartWidth,n=t.chartHeight,(o.targetFo||o.target).attr({x:0,y:0,width:r,height:n}).css({pointerEvents:h?void 0:"none",mixedBlendMode:"normal",opacity:1}).addClass(h?"highcharts-tracker":""),l instanceof i&&l.boost?.markerGroup?.translate(t.plotLeft,t.plotTop)},o.clipRect=t.renderer.clipRect(),(o.targetFo||o.target).attr({zIndex:e.options.zIndex}),l instanceof i&&(l.boost.markerGroup=l.renderer.g().add(s).translate(e.xAxis.pos,e.yAxis.pos))),o.canvas.width=r,o.canvas.height=n,o.clipRect){let x=Mt(t,l);o.clipRect.attr(x),x.width===t.clipBox.width&&x.height===t.clipBox.height?s?.clip(t.renderer.clipRect(x.x-4,x.y,x.width+4,x.height+4)):(o.targetFo||o.target).clip(o.clipRect)}return o.resize(),o.clear(),!o.wgl&&(o.wgl=new c(x=>{x.settings.debug.timeBufferCopy&&console.time("buffer copy"),o.copy(),x.settings.debug.timeBufferCopy&&console.timeEnd("buffer copy")}),o.wgl.init(o.canvas)||Gt("[highcharts boost] - unable to init WebGL renderer"),o.wgl.setOptions(t.options.boost||{}),l instanceof i&&o.wgl.allocateBuffer(t)),o.wgl.setSize(r,n),o.wgl}function qt(t){let e=t.points;if(e){let i,s;for(s=0;s<e.length;s+=1)(i=e[s])&&i.destroyElements&&i.destroyElements()}for(let i of(["graph","area","tracker"].forEach(s=>{let r=t[s];r&&(t[s]=r.destroy())}),t.zones))hi(i,void 0,!0)}function at(t,e,i,s,r,n){let l=(r=r||0)+(s=s||3e3),a=!0;for(;a&&r<l&&r<t.length;)a=e(t[r],r),++r;a&&(r<t.length?n?at(t,e,i,s,r,n):Ot.requestAnimationFrame?Ot.requestAnimationFrame(function(){at(t,e,i,s,r)}):setTimeout(at,0,t,e,i,s,r):i&&i())}function $t(t,e){let i=t.options,s=t.dataTable.modified.rowCount,r=t.xAxis&&t.xAxis.options,n=t.yAxis&&t.yAxis.options,l=t.colorAxis&&t.colorAxis.options;return s>ot(i.boostThreshold,Number.MAX_VALUE)&&_e(n.min)&&_e(n.max)&&(!e||_e(r.min)&&_e(r.max))&&(!l||_e(l.min)&&_e(l.max))}let wt=(t,e)=>!t.forceCrop&&(Ae(t.chart)||(e?e.length:0)>=ot(t.options.boostThreshold,Number.MAX_VALUE));function ci(){let t=this,e=t.chart;e.boost&&e.boost.markerGroup===t.markerGroup&&(t.markerGroup=void 0),e.hoverPoints&&(e.hoverPoints=e.hoverPoints.filter(function(i){return i.series===t})),e.hoverPoint&&e.hoverPoint.series===t&&(e.hoverPoint=void 0)}function mi(){let t=this.boost;t&&t.canvas&&t.target&&(t.wgl&&t.wgl.clear(),t.clear&&t.clear())}function Kt(t){let e=t.boost;e&&e.canvas&&e.target&&e.wgl&&!Ae(t.chart)&&e.wgl.render(t.chart)}function Zt(t,e){let i=t.options,s=t.xAxis,r=t.pointClass;if(e instanceof r)return e;let n=i.data,l=t.is("scatter"),a=(l&&t.getColumn("x",!0).length?t.getColumn("x",!0):void 0)||(t.getColumn("x").length?t.getColumn("x"):void 0)||i.xData||t.getColumn("x",!0)||!1,h=t.getColumn("y",!0)||i.yData||!1,o=e.i,x=n?.[o]?.color,d=new r(t,l&&a&&h?[a[o],h[o]]:(Ht(n)?n:[])[o],a?a[o]:void 0);if(l&&i?.keys?.length){let E=i.keys;for(let z=E.length-1;z>-1;z--)d[E[z]]=n[o][z]}return d.category=ot(s.categories?s.categories[d.x]:d.x,d.x),d.key=d.name??d.category,d.dist=e.dist,d.distX=e.distX,d.plotX=e.plotX,d.plotY=e.plotY,d.index=o,d.percentage=e.percentage,d.isInside=t.isPointInside(d),x&&(d.color=x),d}function gi(t){let{options:e,xAxis:i,yAxis:s}=this;if(!this.isDirty&&!i.isDirty&&!s.isDirty&&!t)return!1;this.yAxis.setTickInterval();let r=e.boostThreshold||0,n=e.cropThreshold,l=this.getColumn("x"),a=i.getExtremes(),h=a.max??Number.MAX_VALUE,o=a.min??-Number.MAX_VALUE,x=this.getColumn("y"),d=s.getExtremes(),E=d.max??Number.MAX_VALUE,z=d.min??-Number.MAX_VALUE;if(!this.boosted&&i.old&&s.old&&o>=(i.old.min??-Number.MAX_VALUE)&&h<=(i.old.max??Number.MAX_VALUE)&&z>=(s.old.min??-Number.MAX_VALUE)&&E<=(s.old.max??Number.MAX_VALUE))return this.dataTable.modified.setColumns({x:l,y:x}),!0;let G=this.dataTable.rowCount;if(!r||G<r||n&&!this.forceCrop&&!this.getExtremesFromAll&&!e.getExtremesFromAll&&G<n)return this.dataTable.modified.setColumns({x:l,y:x}),!0;let X=[],H=[],ne=[],le=!(_e(a.max)||_e(a.min)),j=!(_e(d.max)||_e(d.min)),ce=!1,F,Y=l[0],ue=l[0],he,me=x?.[0],J=x?.[0];for(let O=0,Ce=l.length;O<Ce;++O)F=l[O],he=x?.[O],F>=o&&F<=h&&he>=z&&he<=E?(X.push({x:F,y:he}),H.push(F),ne.push(he),le&&(Y=Math.max(Y,F),ue=Math.min(ue,F)),j&&(me=Math.max(me,he),J=Math.min(J,he))):ce=!0;return le&&(i.dataMax=Math.max(Y,i.dataMax||0),i.dataMin=Math.min(ue,i.dataMin||0)),j&&(s.dataMax=Math.max(me,s.dataMax||0),s.dataMin=Math.min(J,s.dataMin||0)),this.cropped=ce,this.cropStart=0,ce&&this.dataTable.modified===this.dataTable&&(this.dataTable.modified=new fe),this.dataTable.modified.setColumns({x:H,y:ne}),wt(this,H)||(this.processedData=X),!0}function pi(){let t=this.options||{},e=this.chart,i=e.boost,s=this.boost,r=this.xAxis,n=this.yAxis,l=t.xData||this.getColumn("x",!0),a=t.yData||this.getColumn("y",!0),h=this.getColumn("low",!0),o=this.getColumn("high",!0),x=this.processedData||t.data,d=r.getExtremes(),E=d.min-(r.minPointOffset||0),z=d.max+(r.minPointOffset||0),G=n.getExtremes(),X=G.min-(n.minPointOffset||0),H=G.max+(n.minPointOffset||0),ne={},le=!!this.sampling,j=t.enableMouseTracking,ce=t.threshold,F=this.pointArrayMap&&this.pointArrayMap.join(",")==="low,high",Y=!!t.stacking,ue=this.cropStart||0,he=this.requireSorting,me=!l,J=t.findNearestPointBy==="x",O=(this.getColumn("x").length?this.getColumn("x"):void 0)||this.options.xData||this.getColumn("x",!0),Ce=ot(t.lineWidth,1),Ge=t.nullInteraction&&X,nt=e.tooltip,Xe=!1,lt,Se=n.getThreshold(ce),$e,Ue,Re,Te;if(!this.boosted||(this.points?.forEach(R=>{R?.destroyElements?.()}),this.points=[],nt&&!nt.isHidden?(e.hoverPoint?.series===this||e.hoverPoints?.some(R=>R.series===this))&&(e.hoverPoint=e.hoverPoints=void 0,nt.hide(0)):e.hoverPoints&&(e.hoverPoints=e.hoverPoints.filter(R=>R.series!==this)),r.isPanning||n.isPanning)||(Xe=Wt(e,this),e.boosted=!0,!this.visible))return;(this.points||this.graph)&&qt(this),Ae(e)?(this.markerGroup&&this.markerGroup!==i?.markerGroup&&this.markerGroup.destroy(),this.markerGroup=i?.markerGroup,s&&s.target&&(this.renderTarget=s.target=s.target.destroy())):(this.markerGroup===i?.markerGroup&&(this.markerGroup=void 0),this.markerGroup=this.plotGroup("markerGroup","markers","visible",1,e.seriesGroup).addClass("highcharts-tracker"));let He=this.points=[],Me=(R,se,T,M)=>{let k=!!O&&O[ue+T],re=w=>{e.inverted&&(w=r.len-w,se=n.len-se),He.push({destroy:Vt,x:k,clientX:w,plotX:w,plotY:se,i:ue+T,percentage:M})};R=Math.ceil(R),Le=J?R:R+","+se,j&&(ne[Le]?k===O[O.length-1]&&(He.length--,re(R)):(ne[Le]=!0,re(R)))};this.buildKDTree=Vt,Xt(this,"renderCanvas"),i&&s?.target&&Ce>1&&this.is("line")&&(i.lineWidthFilter?.remove(),i.lineWidthFilter=e.renderer.definition({tagName:"filter",children:[{tagName:"feMorphology",attributes:{operator:"dilate",radius:.25*Ce}}],attributes:{id:"linewidth"}}),s.target.attr({filter:"url(#linewidth)"})),Xe&&(jt(Xe,this),Xe.pushSeries(this),Kt(this));let Ie=Xe.settings;e.renderer.forExport||(Ie.debug.timeKDTree&&console.time("kd tree building"),at(Y?this.data.slice(ue):l||x,function(R,se){let T=e.index===void 0,M,k,re,w,ge,pe=!1,De=!0;return!fi(R)||(!T&&(me?(M=R[0],k=R[1]):(M=R,k=a[se]??Ge??null),F?(me&&(k=R.slice(1,3)),pe=h[se],k=o[se]):Y&&(M=R.x,pe=(k=R.stackY)-R.y,ge=R.percentage),he||(De=(k||0)>=X&&k<=H),k!==null&&M>=E&&M<=z&&De&&(re=r.toPixels(M,!0),le?((Re===void 0||re===lt)&&(F||(pe=k),(Te===void 0||k>Ue)&&(Ue=k,Te=se),(Re===void 0||pe<$e)&&($e=pe,Re=se)),J&&re===lt||(Re!==void 0&&(w=n.toPixels(Ue,!0),Se=n.toPixels($e,!0),Me(re,w,Te,ge),Se!==w&&Me(re,Se,Re,ge)),Re=Te=void 0,lt=re)):Me(re,w=Math.ceil(n.toPixels(k,!0)),se,ge))),!T)},()=>{Xt(this,"renderedCanvas"),delete this.buildKDTree,this.options&&this.buildKDTree(),Ie.debug.timeKDTree&&console.timeEnd("kd tree building")}))}function xi(t){let e=!0;if(this.chart.options&&this.chart.options.boost&&(e=this.chart.options.boost.enabled===void 0||this.chart.options.boost.enabled),!e||!this.boosted)return t.call(this);this.chart.boosted=!0;let i=Wt(this.chart,this);i&&(jt(i,this),i.pushSeries(this)),Kt(this)}function bi(t){if(this.boosted){if($t(this))return{};if(this.xAxis.isPanning||this.yAxis.isPanning)return this}return t.apply(this,[].slice.call(arguments,1))}function yi(t){let e=this.options.data;if(Yt(this.chart)&&V[this.type]){let s=this.is("scatter")&&!this.is("bubble")&&!this.is("treemap")&&!this.is("heatmap");if(!wt(this,e)||s||this.is("treemap")||this.options.stacking||!$t(this,!0)){if(this.boosted&&(this.xAxis?.isPanning||this.yAxis?.isPanning))return;s&&this.yAxis.type!=="treegrid"?gi.call(this,arguments[1]):t.apply(this,[].slice.call(arguments,1)),e=this.getColumn("x",!0)}if(this.boosted=wt(this,e),this.boosted){let r;this.options.data?.length&&(_e(r=this.getFirstValidPoint(this.options.data))||Ht(r)||this.is("treemap")||Gt(12,!1,this.chart));var i=this;i.boost=i.boost||{getPoint:l=>Zt(i,l)};let n=i.boost.altered=[];if(["allowDG","directTouch","stickyTracking"].forEach(l=>{n.push({prop:l,val:i[l],own:Object.hasOwnProperty.call(i,l)})}),i.allowDG=!1,i.directTouch=!1,i.stickyTracking=!0,i.finishedAnimating=!0,i.labelBySeries&&(i.labelBySeries=i.labelBySeries.destroy()),i.is("scatter")&&!i.is("treemap")&&i.data.length){for(let l of i.data)l?.destroy?.();i.data.length=0,i.points.length=0,delete i.processedData}}else(function(r){let n=r.boost,l=r.chart,a=l.boost;if(a?.markerGroup)for(let h of(a.markerGroup.destroy(),a.markerGroup=void 0,l.series))h.markerGroup=void 0,h.markerGroup=h.plotGroup("markerGroup","markers","visible",1,l.seriesGroup).addClass("highcharts-tracker");n&&((n.altered||[]).forEach(h=>{h.own?r[h.prop]=h.val:delete r[h.prop]}),n.clear&&n.clear()),(l.seriesGroup||r.group)?.clip()})(this)}else t.apply(this,[].slice.call(arguments,1))}function vi(t){let e=t.apply(this,[].slice.call(arguments,1));return this.boost&&e?this.boost.getPoint(e):e}let Ai={compose:function(t,e,i,s){if(di(ui,"Boost.Series")){let r=ft().plotOptions,n=t.prototype;if(Ft(t,"destroy",ci),Ft(t,"hide",mi),s&&(n.renderCanvas=pi),Be(n,"getExtremes",bi),Be(n,"processData",yi),Be(n,"searchPoint",vi),["translate","generatePoints","drawTracker","drawPoints","render"].forEach(l=>(function(a,h,o){function x(d){let E=this.options.stacking&&(o==="translate"||o==="generatePoints");this.boosted&&!E&&Yt(this.chart)&&this.type!=="heatmap"&&this.type!=="treemap"&&V[this.type]&&this.options.boostThreshold!==0?o==="render"&&this.renderCanvas&&this.renderCanvas():d.call(this)}if(Be(a,o,x),o==="translate")for(let d of["column","arearange","columnrange","heatmap","treemap"])h[d]&&Be(h[d].prototype,o,x)})(n,e,l)),Be(i.prototype,"firePointEvent",function(l,a,h){if(a==="click"&&this.series.boosted){let o=h.point;if((o.dist||o.distX)>=(o.series.options.marker?.radius??10))return}return l.apply(this,[].slice.call(arguments,1))}),Z.forEach(l=>{let a=r[l];a&&(a.boostThreshold=5e3,a.boostData=[],e[l].prototype.fillOpacity=!0)}),s){let{area:l,areaspline:a,bubble:h,column:o,heatmap:x,scatter:d,treemap:E}=e;if(l&&kt(l.prototype,{fill:!0,fillOpacity:!0,sampling:!0}),a&&kt(a.prototype,{fill:!0,fillOpacity:!0,sampling:!0}),h){let z=h.prototype;delete z.buildKDTree,Be(z,"markerAttribs",function(G){return!this.boosted&&G.apply(this,[].slice.call(arguments,1))})}o&&kt(o.prototype,{fill:!0,sampling:!0}),d&&(d.prototype.fill=!0),[x,E].forEach(z=>{z&&Be(z.prototype,"drawPoints",xi)})}}return t},destroyGraphics:qt,eachAsync:at,getPoint:Zt},_i={defaultHTMLColorMap:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",feldspar:"#d19275",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslateblue:"#8470ff",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",violetred:"#d02090",wheat:"#f5deb3",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},{doc:Pi,win:Ci}=y(),{addEvent:Ti,error:Mi}=y(),Qt=["webgl","experimental-webgl","moz-webgl","webkit-3d"];function Jt(){let t;if(Ci.WebGLRenderingContext!==void 0){t=Pi.createElement("canvas");for(let e=0;e<Qt.length;++e)try{if(t.getContext(Qt[e])!=null)return!0}catch{}}return!1}let ei={compose:function(t,e,i,s,r,n){let l=Jt();l||(y().initCanvasBoost!==void 0?y().initCanvasBoost():Mi(26)),n&&!n.names.lightgoldenrodyellow&&(n.names={...n.names,..._i.defaultHTMLColorMap}),tt.compose(t,l),Ai.compose(i,s,r,l),Ti(e,"setExtremes",function(a){for(let h of[this.chart,...this.series].map(o=>o.renderTarget).filter(Boolean)){let{horiz:o,pos:x}=this,d=o?"scaleX":"scaleY",E=o?"translateX":"translateY",z=h?.[d]??1,G=1,X=0,H=1,ne="none";this.isPanning&&(G=(a.scale??1)*z,X=(h?.[E]||0)-G*(a.move||0)+z*x-G*x,H=.7,ne="blur(3px)"),h?.attr({[d]:G,[E]:X}).css({transition:"250ms filter, 250ms opacity",filter:ne,opacity:H})}})},hasWebGLSupport:Jt},Fe=y();Fe.hasWebGLSupport=ei.hasWebGLSupport,ei.compose(Fe.Chart,Fe.Axis,Fe.Series,Fe.seriesTypes,Fe.Point,Fe.Color);let ki=y();return ie.default})())})(yt)),yt.exports}Di();const Ni={style:{"margin-bottom":"20px",display:"flex",gap:"12px","align-items":"center"}},Vi={style:{display:"flex",gap:"16px","align-items":"center","flex-wrap":"wrap"}},Oi={key:0},Fi={style:{display:"flex",gap:"16px","align-items":"center","flex-wrap":"wrap","margin-top":"10px"}},Gi={style:{flex:"1","min-width":"100px","max-width":"200px"}},Xi={style:{flex:"1","min-width":"100px","max-width":"200px"}},Hi={key:0,style:{display:"flex",gap:"16px","align-items":"center"}},ji={style:{"padding-top":"24px"}},Yi={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Wi={style:{"font-size":"16px","font-weight":"500"}},qi={key:0,style:{"font-size":"14px",color:"#666"}},$i={style:{"text-align":"center",color:"#666","font-size":"12px"}},Ki=wi({__name:"Charts",setup(It){const Dt=zi(),qe=()=>{Dt.push("/home")},we=xe([]),Le=xe(!1),K=xe(""),te=xe(""),m=xe("voltage"),Ee=xe(!1),N=xe(!1),ie=xe(null),Je=xe(null);let y=null;const Z=xe(0),V=xe(void 0),ye=xe(10),Ve=Ze(()=>{switch(m.value){case"voltage":case"voltage_range":case"avg_voltage":return 0;case"pump_pressure":case"inlet_outlet_pressure":case"oxygen_hydrogen_outlet_pressure":case"pressure_difference":return 2;case"specific_gravity":return 3;case"oxygen_hydrogen_outlet_temp":return 1;case"oxygen_hydrogen_cross":return 2;case"hydrogen_flow_meter":return 2;default:return 2}}),Oe=Ze(()=>{const f=new Set;return we.value.forEach(u=>{u.machine_name&&f.add(u.machine_name)}),Array.from(f).sort((u,b)=>{const v=parseInt(u.split("#")[0].trim())||0,p=parseInt(b.split("#")[0].trim())||0;return v-p})}),vt=Ze(()=>{if(!K.value)return[];const f=new Set;return we.value.forEach(u=>{u.machine_name===K.value&&u.machine_model&&f.add(u.machine_model)}),Array.from(f).sort((u,b)=>b.localeCompare(u))}),et=Ze(()=>!K.value||!te.value?"":`${K.value} - ${te.value}`),ht=Ze(()=>{if(!ie.value)return"";const f=ie.value[m.value];return f?m.value==="voltage"?`${Object.keys(f).length} 条曲线`:["inlet_outlet_pressure","oxygen_hydrogen_outlet_pressure","oxygen_hydrogen_outlet_temp","oxygen_hydrogen_cross"].includes(m.value)?"2 条曲线":"1 条曲线":""}),tt=Ze(()=>{if(!ie.value)return 0;const f=ie.value[m.value];if(!f)return 0;if(m.value==="voltage")return Object.values(f).reduce((u,b)=>b.x&&b.y?u+Math.min(b.x.length,b.y.length):u,0);if(["inlet_outlet_pressure","oxygen_hydrogen_outlet_pressure","oxygen_hydrogen_outlet_temp","oxygen_hydrogen_cross"].includes(m.value)){const u=f;let b=0;return Object.values(u).forEach(v=>{v.x&&v.y&&(b+=Math.min(v.x.length,v.y.length))}),b}else{const u=f;return u.x&&u.y?Math.min(u.x.length,u.y.length):0}}),At=async()=>{Le.value=!0;try{const u=await(await fetch("/api/get/device_list")).json();u.status==="success"?we.value=u.data:Qe.error("加载设备列表失败")}catch(f){console.error("Error loading device list:",f),Qe.error("加载设备列表失败")}finally{Le.value=!1}},it=async()=>{if(!K.value||!te.value){Qe.warning("请先选择设备名称和型号");return}Ee.value=!0;try{const f=`/api/get/one_device/all_data?machine_name=${encodeURIComponent(K.value)}&machine_model=${encodeURIComponent(te.value)}`,b=await(await fetch(f)).json();b.status==="success"?(ie.value=b.data,N.value=!0,ri(()=>{dt()}),Qe.success("数据加载成功")):Qe.error(`加载数据失败: ${b.detail||"未知错误"}`)}catch(f){console.error("Error loading chart data:",f),Qe.error("加载数据失败")}finally{Ee.value=!1}},_t=()=>{K.value?localStorage.setItem("cached_machine_name_optimized",K.value):localStorage.removeItem("cached_machine_name_optimized"),te.value="",localStorage.removeItem("cached_machine_model_optimized"),y&&(y.destroy(),y=null),N.value=!1,ie.value=null,m.value="voltage",Z.value=0,V.value=void 0,ye.value=10},Pt=async()=>{te.value?localStorage.setItem("cached_machine_model_optimized",te.value):localStorage.removeItem("cached_machine_model_optimized"),y&&(y.destroy(),y=null),N.value=!1,ie.value=null,m.value="voltage",Z.value=0,V.value=void 0,ye.value=10,te.value&&(await ri(),it())},Ct=()=>{Z.value=0,V.value=void 0,ye.value=10,dt()},st=()=>{if(!ie.value)return 0;const f=ie.value[m.value];if(!f)return 0;let u=0;if(m.value==="voltage")Object.values(f).forEach(b=>{if(b.y&&b.y.length>0){const v=b.y.filter(p=>p!=null);if(v.length>0){const p=Math.max(...v);p>u&&(u=p)}}});else if(["inlet_outlet_pressure","oxygen_hydrogen_outlet_pressure","oxygen_hydrogen_outlet_temp","oxygen_hydrogen_cross"].includes(m.value))Object.values(f).forEach(v=>{if(v.y&&v.y.length>0){const p=v.y.filter(q=>q!=null);if(p.length>0){const q=Math.max(...p);q>u&&(u=q)}}});else{const b=f;if(b.y&&b.y.length>0){const v=b.y.filter(p=>p!=null);v.length>0&&(u=Math.max(...v))}}return u},Tt=()=>{const f=st();Z.value=0,V.value=f*1.1,ye.value=Math.ceil(f*.05),y&&y.yAxis&&y.yAxis[0]&&y.yAxis[0].update({min:0,max:f*1.1},!0)},rt=()=>{y&&y.yAxis&&y.yAxis[0]&&y.yAxis[0].update({min:Z.value,max:V.value||void 0},!0)},dt=()=>{if(!Je.value||!ie.value)return;const f=ie.value[m.value];if(!f)return;y&&y.destroy();const u=["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#EFC94C","#17BECF","#4C72B0","#DD8452","#55A868","#C44E52","#8172B3","#937860","#64B5CD","#E99675","#97BBCD","#B5BD89","#FF6F61","#6A5ACD"];let b=[],v="",p="",q,Q,ae=0;const de=(U,c,L)=>{if(U.x&&U.y){b=[{type:"line",name:c,data:U.x.map((C,B)=>({x:C,y:U.y[B],t:U.t?U.t[B]:void 0})),color:L,marker:{enabled:!1},connectNulls:!0}];const A=U.y.filter(C=>C!=null);if(A.length>0){const C=Math.max(...A),B=C*.1;q=0,Q=C+B,V.value===void 0?(Z.value=0,V.value=Q,ye.value=Math.ceil(Q*.05)):(q=Z.value,Q=V.value)}U.x.length>0&&(ae=Math.max(...U.x)*2)}},ve=(U,c)=>{const L=[],A=[];if(c.forEach(({key:C,name:B,color:Pe})=>{const fe=U[C];if(fe&&fe.x&&fe.y){L.push({type:"line",name:B,data:fe.x.map((Ae,ft)=>({x:Ae,y:fe.y[ft],t:fe.t?fe.t[ft]:void 0})),color:Pe,marker:{enabled:!1},connectNulls:!0});const Mt=fe.y.filter(Ae=>Ae!=null);A.push(...Mt),fe.x.length>0&&ae===0&&(ae=Math.max(...fe.x)*2)}}),b=L,A.length>0){const C=Math.max(...A),B=C*.1;q=0,Q=C+B,V.value===void 0?(Z.value=0,V.value=Q,ye.value=Math.ceil(Q*.05)):(q=Z.value,Q=V.value)}};if(m.value==="voltage"){b=Object.entries(f).map(([L,A],C)=>({type:"line",name:L,data:A.x.map((B,Pe)=>({x:B,y:A.y[Pe],t:A.t?A.t[Pe]:void 0})),color:u[C%u.length],marker:{enabled:!1},connectNulls:!0})),v="电压 (mV)",p="小室电压";const U=st()*1.1;q=0,Q=U,V.value===void 0?(Z.value=0,V.value=U,ye.value=Math.ceil(U*.05)):(q=Z.value,Q=V.value);const c=b[0];if(c&&"data"in c&&Array.isArray(c.data)&&c.data.length>0){const L=c.data.map(C=>C.x);ae=Math.max(...L)*2}}else m.value==="voltage_range"?(de(f,"极差","#7cb5ec"),v="极差 (mV)",p="小室极差"):m.value==="avg_voltage"?(de(f,"平均电压","#FF7F0E"),v="小室平均电压 (mV)",p="小室电压平均值"):m.value==="pump_pressure"?(de(f,"泵后压力","#2CA02C"),v="泵压 (Bar)",p="泵后压力"):m.value==="specific_gravity"?(de(f,"碱液比重","#D62728"),v="比重 (mg/cm³)",p="碱液比重"):m.value==="hydrogen_flow_meter"?(de(f,"Hydrogen Flow","#9467BD"),v="氢流量",p="氢气流量"):m.value==="pressure_difference"?(de(f,"Pressure Difference","#E74C3C"),v="压力差 (Bar)",p="电解槽进出口压差"):m.value==="inlet_outlet_pressure"?(ve(f,[{key:"inlet_pressure",name:"进槽压力",color:"#1F77B4"},{key:"oxygen_outlet_pressure",name:"氧侧出槽压力",color:"#FF7F0E"}]),v="压差 (Bar)",p="电解槽进出槽压力"):m.value==="oxygen_hydrogen_outlet_pressure"?(ve(f,[{key:"oxygen_outlet_pressure",name:"氧侧出槽压力",color:"#2CA02C"},{key:"hydrogen_outlet_pressure",name:"氢侧出槽压力",color:"#D62728"}]),v="压差 (Bar)",p="电解槽氢氧侧出槽压力"):m.value==="oxygen_hydrogen_outlet_temp"?(ve(f,[{key:"oxygen_outlet_temp",name:"氧侧出槽温度",color:"#FF7F0E"},{key:"hydrogen_outlet_temp",name:"氢气出槽温度",color:"#9467BD"}]),v="温度 (°C)",p="电解槽氢氧侧出槽温度"):m.value==="oxygen_hydrogen_cross"&&(ve(f,[{key:"oxygen_in_hydrogen",name:"氧中氢",color:"#17BECF"},{key:"hydrogen_in_oxygen",name:"氢中氧",color:"#8C564B"}]),v="含量 (ppm)",p="氧中氢/氢中氧");y=Li.chart(Je.value,{accessibility:{enabled:!1},boost:{useGPUTranslations:!0,seriesThreshold:1},chart:{type:"line",zooming:{type:"x"},panning:{enabled:!0,type:"x"},animation:!1,panKey:"shift"},title:{text:p},xAxis:{title:{text:"时间 (小时)"},crosshair:!0,max:ae},yAxis:{title:{text:v},crosshair:!0,min:q,max:Q,startOnTick:!1,endOnTick:!1},legend:{enabled:["voltage","inlet_outlet_pressure","oxygen_hydrogen_outlet_pressure","oxygen_hydrogen_outlet_temp","oxygen_hydrogen_cross"].includes(m.value),layout:"horizontal",align:"center",verticalAlign:"bottom",maxHeight:80},tooltip:{shared:!0,useHTML:!0,animation:!1,positioner:function(U,c,L){const A=this.chart;let C=L.plotX+A.plotLeft+10,B=L.plotY+A.plotTop-c/2;return C+U>A.plotWidth+A.plotLeft&&(C=L.plotX+A.plotLeft-U-10),B<A.plotTop&&(B=A.plotTop),B+c>A.plotTop+A.plotHeight&&(B=A.plotTop+A.plotHeight-c),{x:C,y:B}},formatter:function(){const U=this.x;let c='<div style="font-size: 14px;">';if(c+='<div style="text-align: center; font-weight: 500; margin-bottom: 8px; padding-bottom: 4px; border-bottom: 1px solid #eee;">',c+=`时间: <span style="color: #409EFF">${U.toFixed(0)}</span> 小时`,this.points&&this.points.length>0&&this.points[0].options.t&&(c+=`<br><span style="font-size: 12px; color: #909399;">${this.points[0].options.t}</span>`),c+="</div>",this.points){let L="",A=2;m.value==="voltage"||m.value==="voltage_range"||m.value==="avg_voltage"?(L="mV",A=0):m.value==="pump_pressure"||m.value==="inlet_outlet_pressure"||m.value==="oxygen_hydrogen_outlet_pressure"||m.value==="pressure_difference"?(L="Mpa",A=2):m.value==="specific_gravity"?(L="mg/cm³",A=3):m.value==="oxygen_hydrogen_outlet_temp"?(L="℃",A=1):m.value==="oxygen_hydrogen_cross"?(L="ppm",A=2):m.value==="hydrogen_flow_meter"&&(L="",A=2),this.points.forEach(C=>{c+='<div style="margin: 4px 0; display: flex; align-items: center; justify-content: space-between;">',c+='<span style="display: flex; align-items: center;">',c+=`<span style="display: inline-block; width: 12px; height: 12px; border-radius: 50%; background-color: ${C.series.color}; margin-right: 8px;"></span>`,c+=`<span style="font-weight: 500;">${C.series.name}</span>`,c+="</span>",c+=`<span style="font-weight: bold; color: ${C.series.color};">&nbsp;${Number(C.y).toFixed(A)}${L?" "+L:""}</span>`,c+="</div>"})}return c+="</div>",c}},plotOptions:{line:{animation:!1,marker:{enabled:!1},states:{hover:{enabled:!0,lineWidth:4}}}},series:b,credits:{enabled:!1},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{enabled:!1}}}]}})};return Ei(async()=>{await At();const f=localStorage.getItem("cached_machine_name_optimized"),u=localStorage.getItem("cached_machine_model_optimized");if(f&&u){const b=we.value.some(p=>p.machine_name===f),v=we.value.some(p=>p.machine_name===f&&p.machine_model===u);b&&v&&(K.value=f,te.value=u,await it())}}),Si(()=>{y&&y.destroy()}),(f,u)=>{const b=ze("el-button"),v=ze("el-popover"),p=ze("el-radio-button"),q=ze("el-radio-group"),Q=ze("el-option"),ae=ze("el-select"),de=ze("el-input-number"),ve=ze("el-card"),U=ze("el-empty");return be(),Ye(ve,null,{default:S(()=>[P("div",Ni,[D(b,{onClick:qe,type:"primary",plain:"",icon:"ArrowLeft"},{default:S(()=>[...u[5]||(u[5]=[oe("返回首页",-1)])]),_:1}),D(v,{placement:"bottom-start",width:400,trigger:"hover"},{reference:S(()=>[D(b,{type:"info",plain:"",icon:"InfoFilled"},{default:S(()=>[...u[6]||(u[6]=[oe("说明",-1)])]),_:1})]),default:S(()=>[u[7]||(u[7]=P("div",{style:{"line-height":"1.8"}},[P("h4",{style:{margin:"0 0 12px 0",color:"#409EFF"}},"📊 图表说明"),P("p",{style:{margin:"8px 0"}},[P("strong",null,"📈 简要说明:")]),P("ul",{style:{margin:"4px 0","padding-left":"20px"}},[P("li",null,"可自定义Y轴范围或自动适配"),P("li",null,"自动过滤小室电压小于1400的时间点"),P("li",null,"所有图表的时间点对齐"),P("li",null,"所有数据均为平均值(每小时),向下取整"),P("li",null,"X轴扩充为最大时间的2倍")]),P("p",{style:{margin:"8px 0"}},[P("strong",null,"💡 操作提示:")]),P("ul",{style:{margin:"4px 0","padding-left":"20px"}},[P("li",null,"支持X轴缩放,鼠标选中区域就可以放大图表"),P("li",null,"按住Shift+拖拽:平移图表")])],-1))]),_:1})]),D(ve,{style:{"margin-bottom":"20px"}},{default:S(()=>[P("div",Vi,[N.value?(be(),ut("div",Oi,[D(q,{modelValue:m.value,"onUpdate:modelValue":u[0]||(u[0]=c=>m.value=c),onChange:Ct,size:"large"},{default:S(()=>[D(p,{label:"voltage"},{default:S(()=>[...u[8]||(u[8]=[oe("小室电压",-1)])]),_:1}),D(p,{label:"avg_voltage"},{default:S(()=>[...u[9]||(u[9]=[oe("小室电压平均值",-1)])]),_:1}),D(p,{label:"voltage_range"},{default:S(()=>[...u[10]||(u[10]=[oe("小室极差",-1)])]),_:1}),D(p,{label:"pump_pressure"},{default:S(()=>[...u[11]||(u[11]=[oe("泵后压力",-1)])]),_:1}),D(p,{label:"specific_gravity"},{default:S(()=>[...u[12]||(u[12]=[oe("碱液比重",-1)])]),_:1}),D(p,{label:"hydrogen_flow_meter"},{default:S(()=>[...u[13]||(u[13]=[oe("氢气流量",-1)])]),_:1}),D(p,{label:"inlet_outlet_pressure"},{default:S(()=>[...u[14]||(u[14]=[oe("电解槽进出槽压力",-1)])]),_:1}),D(p,{label:"pressure_difference"},{default:S(()=>[...u[15]||(u[15]=[oe("电解槽进出口压差",-1)])]),_:1}),D(p,{label:"oxygen_hydrogen_outlet_pressure"},{default:S(()=>[...u[16]||(u[16]=[oe("电解槽氢氧侧出槽压力",-1)])]),_:1}),D(p,{label:"oxygen_hydrogen_outlet_temp"},{default:S(()=>[...u[17]||(u[17]=[oe("电解槽氢氧侧出槽温度",-1)])]),_:1}),D(p,{label:"oxygen_hydrogen_cross"},{default:S(()=>[...u[18]||(u[18]=[oe("氧中氢/氢中氧",-1)])]),_:1})]),_:1},8,["modelValue"])])):We("",!0)]),P("div",Fi,[P("div",Gi,[u[19]||(u[19]=P("div",{style:{"margin-bottom":"4px","font-size":"14px",color:"#606266"}},"设备名称 (Machine Name)",-1)),D(ae,{modelValue:K.value,"onUpdate:modelValue":u[1]||(u[1]=c=>K.value=c),placeholder:"请选择设备名称",filterable:"",clearable:"",style:{width:"100%"},loading:Le.value,onChange:_t},{default:S(()=>[(be(!0),ut(ai,null,oi(Oe.value,c=>(be(),Ye(Q,{key:c,label:c,value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),P("div",Xi,[u[20]||(u[20]=P("div",{style:{"margin-bottom":"4px","font-size":"14px",color:"#606266"}},"设备型号 (Machine Model)",-1)),D(ae,{modelValue:te.value,"onUpdate:modelValue":u[2]||(u[2]=c=>te.value=c),placeholder:"请选择设备型号",filterable:"",clearable:"",style:{width:"100%"},loading:Le.value,disabled:!K.value,onChange:Pt},{default:S(()=>[(be(!0),ut(ai,null,oi(vt.value,c=>(be(),Ye(Q,{key:c,label:c,value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),N.value?(be(),ut("div",Hi,[P("div",null,[u[21]||(u[21]=P("div",{style:{"margin-bottom":"4px","font-size":"14px",color:"#606266"}},"Y轴最小值 (Y Min)",-1)),D(de,{modelValue:Z.value,"onUpdate:modelValue":u[3]||(u[3]=c=>Z.value=c),step:ye.value,min:0,placeholder:"0",style:{width:"150px"},onChange:rt,precision:Ve.value},null,8,["modelValue","step","precision"])]),P("div",null,[u[22]||(u[22]=P("div",{style:{"margin-bottom":"4px","font-size":"14px",color:"#606266"}},"Y轴最大值 (Y Max)",-1)),D(de,{modelValue:V.value,"onUpdate:modelValue":u[4]||(u[4]=c=>V.value=c),step:ye.value,min:0,placeholder:"自适应",style:{width:"150px"},onChange:rt,precision:Ve.value},null,8,["modelValue","step","precision"])]),P("div",ji,[D(b,{onClick:Tt,type:"primary"},{default:S(()=>[...u[23]||(u[23]=[oe("自动适配",-1)])]),_:1})])])):We("",!0)])]),_:1}),N.value?(be(),Ye(ve,{key:0},{header:S(()=>[P("div",Yi,[P("div",Wi,bt(m.value==="voltage"?"小室电压":m.value==="voltage_range"?"小室极差":m.value==="avg_voltage"?"小室电压平均值":m.value==="pump_pressure"?"泵后压力":m.value==="specific_gravity"?"碱液比重":m.value==="hydrogen_flow_meter"?"氢气流量":m.value==="inlet_outlet_pressure"?"电解槽进出槽压力":m.value==="oxygen_hydrogen_outlet_pressure"?"电解槽氢氧侧出槽压力":m.value==="oxygen_hydrogen_outlet_temp"?"电解槽氢氧侧出槽温度":m.value==="oxygen_hydrogen_cross"?"氧中氢/氢中氧":"电解槽进出口压差"),1),ht.value?(be(),ut("div",qi,bt(ht.value),1)):We("",!0)])]),footer:S(()=>[P("div",$i," 渲染模式: Boost 高性能模式 | 设备: "+bt(et.value)+" | 数据点: "+bt(tt.value),1)]),default:S(()=>[Ee.value?(be(),Ye(ni,{key:0})):We("",!0),Ui(P("div",{ref_key:"chartContainer",ref:Je,style:{width:"100%",height:"600px"}},null,512),[[Ri,!Ee.value]])]),_:1})):We("",!0),!N.value&&Ee.value?(be(),Ye(ve,{key:1},{header:S(()=>[...u[24]||(u[24]=[P("div",{style:{"font-size":"16px","font-weight":"500"}},"加载中...",-1)])]),default:S(()=>[D(ni)]),_:1})):We("",!0),!N.value&&!Ee.value?(be(),Ye(U,{key:2,description:"请选择设备名称和型号","image-size":200})):We("",!0)]),_:1})}}}),is=Bi(Ki,[["__scopeId","data-v-67108d0e"]]);export{is as default};
